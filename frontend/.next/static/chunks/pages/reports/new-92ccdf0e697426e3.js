(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3186],{292:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reports/new",function(){return r(8443)}])},8443:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var o=r(5893),s=r(7294),a=r(1163),l=r(2920),n=r(6153),i=r(610);function d(){var e,t;let[r,d]=(0,s.useState)([]),[c,m]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),[u,x]=(0,s.useState)(""),[g,b]=(0,s.useState)(""),[v,y]=(0,s.useState)(!1),[j,f]=(0,s.useState)(!0),[N,w]=(0,s.useState)(1),[k,C]=(0,s.useState)({}),[S,_]=(0,s.useState)({}),[R,P]=(0,s.useState)({}),[O,A]=(0,s.useState)({}),E=(0,s.useRef)({}),[I,F]=(0,s.useState)(null),[L,B]=(0,s.useState)(""),q=(0,a.useRouter)();(0,s.useEffect)(()=>{let e=async()=>{try{console.log("Fetching all properties");let e=await i.E.properties.getAll();d(e.data),q.query.propertyId&&(console.log("Found propertyId in query params:",q.query.propertyId),m(q.query.propertyId)),f(!1)}catch(e){console.error("Properties fetch error:",e),l.Am.error("An error occurred while loading properties."),f(!1)}};q.isReady&&e()},[q.isReady,q.query]),(0,s.useEffect)(()=>{c&&(console.log("Selected property ID:",c),(async()=>{try{console.log("Fetching property details for ID:",c);let e=await i.E.properties.getById(c);console.log("Property API Response:",e.data);let t=e.data,r=null;if(!t.bedrooms&&!t.bathrooms&&!t.living_rooms&&!t.kitchen_count){console.log("Property details not available from API, checking localStorage");try{let e=localStorage.getItem("propertyDetails");if(e){let o=JSON.parse(e);o[c]&&(console.log("Found property details in localStorage:",o[c]),r=o[c],t.bedrooms=r.bedrooms,t.bathrooms=r.bathrooms,t.living_rooms=r.living_rooms,t.kitchen_count=r.kitchen_count,t.additional_spaces=r.additional_spaces)}}catch(e){console.error("Error loading property details from localStorage:",e)}}console.log("Final property data for room creation:",t);let o={};if(t.bedrooms&&"0"!==t.bedrooms){console.log("Adding bedrooms:",t.bedrooms);let e="6+"===t.bedrooms?6:parseInt(t.bedrooms);for(let t=1;t<=e;t++)o["bedroom_".concat(t)]="Bedroom ".concat(t)}if(t.bathrooms){console.log("Adding bathrooms:",t.bathrooms);let e="4+"===t.bathrooms?4:t.bathrooms.includes(".5")?Math.floor(parseFloat(t.bathrooms))+1:parseInt(t.bathrooms);for(let t=1;t<=e;t++)o["bathroom_".concat(t)]="Bathroom ".concat(t)}let s=t.living_rooms||t.livingRooms;if(s&&"0"!==s){console.log("Adding living rooms:",s);let e="4+"===s?4:parseInt(s);for(let t=1;t<=e;t++)o["livingroom_".concat(t)]="Living Room ".concat(t)}let a=t.kitchen_count||t.kitchenCount;if(a&&"0"!==a){console.log("Adding kitchens:",a);let e="4+"===a?4:parseInt(a);for(let t=1;t<=e;t++)o["kitchen_".concat(t)]="Kitchen ".concat(t)}if(t.additional_spaces){let e;console.log("Adding additional spaces:",t.additional_spaces);try{e="string"==typeof t.additional_spaces?JSON.parse(t.additional_spaces):t.additional_spaces,Object.entries(e).forEach(e=>{let[t,r]=e;r&&(o[t]=t.charAt(0).toUpperCase()+t.slice(1))})}catch(e){console.error("Error parsing additional spaces:",e)}}0===Object.keys(o).length&&(console.log("No rooms found, adding default room"),o.general="General"),console.log("Final rooms structure:",o);let l={},n={},d={},m={};Object.keys(o).forEach(e=>{l[e]=[],n[e]=[],d[e]={},m[e]={}}),B(Object.keys(o)[0]),F(o),C(l),_(n),P(d),A(m)}catch(e){console.error("Error fetching property details:",e),l.Am.error("Failed to load property details."),F({general:"General"}),B("general"),C({general:[]}),_({general:[]}),P({general:{}}),A({general:{}})}})())},[c]),(0,s.useEffect)(()=>{if(!I)return;let e={...S},t=[];return Object.keys(I).forEach(r=>{var o;if(!(null===(o=k[r])||void 0===o?void 0:o.length)){e[r]=[];return}e[r]=[];for(let o=0;o<k[r].length;o++){let s=k[r][o],a=URL.createObjectURL(s);e[r].push(a),t.push(a)}}),_(e),()=>{t.forEach(e=>URL.revokeObjectURL(e))}},[k,I]);let M=(e,t)=>{if(e.target.files&&t){var r;let o=Array.from(e.target.files),s=(null===(r=k[t])||void 0===r?void 0:r.length)||0;C(e=>({...e,[t]:[...e[t]||[],...o]}));let a={...R[t]},l={...O[t]};o.forEach((e,t)=>{let r=s+t;a[r]="",l[r]=[]}),P(e=>({...e,[t]:a})),A(e=>({...e,[t]:l}))}},T=(e,t)=>{C(r=>({...r,[e]:r[e].filter((e,r)=>r!==t)})),_(r=>({...r,[e]:r[e].filter((e,r)=>r!==t)}));let r={...R[e]},o={...O[e]};delete r[t],delete o[t];let s={},a={},l=0;for(let n=0;n<k[e].length;n++)n!==t&&(s[l]=r[n],a[l]=o[n],l++);P(t=>({...t,[e]:s})),A(t=>({...t,[e]:a}))},D=(e,t,r)=>{P(o=>({...o,[e]:{...o[e],[t]:r}}))},U=(e,t,r)=>{r.trim()&&A(o=>({...o,[e]:{...o[e],[t]:[...o[e][t]||[],r.trim()]}}))},H=(e,t,r)=>{A(o=>({...o,[e]:{...o[e],[t]:o[e][t].filter((e,t)=>t!==r)}}))},z=(e,t,r)=>{"Enter"===e.key&&e.target.value.trim()&&(U(t,r,e.target.value),e.target.value="",e.preventDefault())},G=async e=>{if(e.preventDefault(),!c||!h||!g){l.Am.error("Please fill in all required fields.");return}y(!0);try{let e={property_id:c,title:h,description:u,type:g};console.log("Sending report creation request:",e);let r=await i.E.reports.create(e);console.log("Report creation response:",r.data);let o=r.data.id;if(I&&Object.keys(I).some(e=>{var t;return(null===(t=k[e])||void 0===t?void 0:t.length)>0}))for(let e of Object.keys(I)){var t;if((null===(t=k[e])||void 0===t?void 0:t.length)>0)for(let t=0;t<k[e].length;t++){let r=new FormData;r.append("photo",k[e][t]);let s=I[e];R[e]&&R[e][t]&&r.append("note",R[e][t]);let a=O[e]&&O[e][t]?[...O[e][t]]:[];a.includes(s)||a.push(s),a.length>0&&r.append("tags",JSON.stringify(a)),console.log("Uploading ".concat(s," photo ").concat(t+1,"...")),await i.E.photos.upload(o,r),console.log("".concat(s," photo ").concat(t+1," uploaded."))}}l.Am.success("Report created successfully."),q.push("/reports/".concat(o))}catch(t){console.error("Report creation error:",t);let e="An error occurred while creating the report.";t.response&&(console.error("API response error:",t.response.data),e=t.response.data.message||e,401===t.response.status&&(e="Your session has expired. Redirecting to login page...",setTimeout(()=>{q.push("/login")},1500))),l.Am.error(e)}finally{y(!1)}};return j?(0,o.jsx)(n.Z,{children:(0,o.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Create New Report"}),(0,o.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})]})}):(0,o.jsx)(n.Z,{children:(0,o.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-3xl animate-fadeIn",children:[(0,o.jsxs)("div",{className:"text-center mb-8",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-indigo-700 mb-2",children:"Create New Report"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Document the condition of your property"})]}),0===r.length?(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 p-8 text-center",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"You need to add a property first before creating a report"}),(0,o.jsx)("p",{className:"text-gray-600 mb-6",children:"Reports are used to document the condition of your properties. You need to add at least one property before continuing."}),(0,o.jsx)("button",{onClick:()=>q.push("/properties/new"),className:"btn btn-primary hover:bg-indigo-500 transition-all duration-300",children:"Add Property"})]}):(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100",children:[(0,o.jsxs)("div",{className:"bg-indigo-50 p-4",children:[(0,o.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,o.jsx)("div",{className:"bg-indigo-600 h-2.5 rounded-full",style:{width:1===N?"33%":2===N?"66%":"100%"}})}),(0,o.jsxs)("div",{className:"flex justify-between mt-2 text-xs text-gray-500",children:[(0,o.jsxs)("span",{className:"font-medium text-indigo-700",children:["Step ",N," of 3"]}),(0,o.jsx)("span",{children:1===N?"Basic Information":2===N?"Photos":"Confirmation"})]})]}),(0,o.jsx)("form",{onSubmit:3===N?G:e=>e.preventDefault(),children:1===N?(0,o.jsxs)("div",{className:"p-6 space-y-6",children:[(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"property",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Property*"}),(0,o.jsxs)("select",{id:"property",value:c,onChange:e=>m(e.target.value),className:"input focus:border-indigo-500 transition-all duration-300",required:!0,children:[(0,o.jsx)("option",{value:"",children:"Select a property"}),r.map(e=>(0,o.jsx)("option",{value:e.id,children:e.address},e.id))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Title*"}),(0,o.jsx)("input",{id:"title",type:"text",value:h,onChange:e=>p(e.target.value),className:"input focus:border-indigo-500 transition-all duration-300",placeholder:"Enter a short title for the report",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Description"}),(0,o.jsx)("textarea",{id:"description",value:u,onChange:e=>x(e.target.value),rows:3,className:"input focus:border-indigo-500 transition-all duration-300",placeholder:"General description about the report (optional)"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type*"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,o.jsxs)("div",{className:"p-4 rounded-lg border cursor-pointer text-center transition-all duration-300 ".concat("move-in"===g?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-indigo-200 hover:bg-indigo-50"),onClick:()=>b("move-in"),children:[(0,o.jsx)("input",{id:"type-move-in",name:"reportType",type:"radio",value:"move-in",checked:"move-in"===g,onChange:()=>b("move-in"),className:"hidden",required:!0}),(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mx-auto mb-2 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),(0,o.jsx)("label",{htmlFor:"type-move-in",className:"font-medium block",children:"Pre-Move-In"})]}),(0,o.jsxs)("div",{className:"p-4 rounded-lg border cursor-pointer text-center transition-all duration-300 ".concat("move-out"===g?"border-red-500 bg-red-50 text-red-700":"border-gray-200 hover:border-indigo-200 hover:bg-indigo-50"),onClick:()=>b("move-out"),children:[(0,o.jsx)("input",{id:"type-move-out",name:"reportType",type:"radio",value:"move-out",checked:"move-out"===g,onChange:()=>b("move-out"),className:"hidden"}),(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mx-auto mb-2 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,o.jsx)("label",{htmlFor:"type-move-out",className:"font-medium block",children:"Post-Move-Out"})]}),(0,o.jsxs)("div",{className:"p-4 rounded-lg border cursor-pointer text-center transition-all duration-300 ".concat("general"===g?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-indigo-200 hover:bg-indigo-50"),onClick:()=>b("general"),children:[(0,o.jsx)("input",{id:"type-general",name:"reportType",type:"radio",value:"general",checked:"general"===g,onChange:()=>b("general"),className:"hidden"}),(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mx-auto mb-2 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,o.jsx)("label",{htmlFor:"type-general",className:"font-medium block",children:"General Observation"})]})]})]})]}),(0,o.jsxs)("div",{className:"pt-4 flex justify-between items-center border-t border-gray-100 mt-6",children:[(0,o.jsx)("button",{type:"button",onClick:()=>q.back(),className:"btn btn-secondary hover:bg-gray-100 transition-all duration-300",children:"Cancel"}),(0,o.jsx)("button",{type:"button",onClick:()=>{c&&h&&g?w(2):l.Am.error("Please fill in all required fields.")},className:"btn btn-primary hover:bg-indigo-500 transition-all duration-300",children:"Continue"})]})]}):2===N?(0,o.jsxs)("div",{className:"p-6 space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Upload Photos"}),(0,o.jsx)("p",{className:"text-gray-600 mb-6",children:"Upload photos for each room to document the condition of your property"}),I?(0,o.jsxs)("div",{className:"space-y-8",children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Select Room:"}),(0,o.jsx)("div",{className:"grid grid-cols-2 gap-2 md:flex md:flex-wrap md:gap-3",children:Object.entries(I).map(e=>{var t,r;let[s,a]=e;return(0,o.jsxs)("button",{type:"button",onClick:()=>B(s),className:"flex items-center justify-between px-3 py-2 rounded-lg text-left w-full md:w-auto transition-all ".concat((null===(t=k[s])||void 0===t?void 0:t.length)>0?"bg-green-50 border border-green-200 text-green-700 font-medium":L===s?"bg-indigo-50 border border-indigo-200 text-indigo-700 font-medium":"bg-gray-50 border border-gray-200 text-gray-700 hover:bg-gray-100"),children:[(0,o.jsx)("span",{className:"whitespace-nowrap",children:a}),(null===(r=k[s])||void 0===r?void 0:r.length)>0&&(0,o.jsx)("span",{className:"ml-2 bg-green-100 text-green-700 px-2 py-0.5 rounded-full text-xs",children:k[s].length})]},s)})})]}),L?(0,o.jsxs)("div",{className:"mt-6",children:[(0,o.jsxs)("h4",{className:"text-lg font-medium text-gray-800 mb-4",children:[I[L]," Photos"]}),(0,o.jsxs)("div",{className:"flex flex-wrap gap-6 mb-6",children:[null===(e=S[L])||void 0===e?void 0:e.map((e,t)=>{var r;return(0,o.jsxs)("div",{className:"relative bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,o.jsx)("img",{src:e,alt:"".concat(I[L]," Photo ").concat(t+1),className:"w-32 h-32 object-cover rounded-lg"}),(0,o.jsx)("button",{type:"button",onClick:()=>T(L,t),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md","aria-label":"Remove photo",children:"\xd7"}),(0,o.jsxs)("div",{className:"mt-3 w-32",children:[(0,o.jsx)("input",{type:"text",placeholder:"Add note",value:R[L]&&R[L][t]||"",onChange:e=>D(L,t,e.target.value),className:"w-full text-xs p-2 border border-gray-300 rounded"}),(0,o.jsxs)("div",{className:"mt-2",children:[(0,o.jsx)("input",{type:"text",placeholder:"Add tag and press Enter",onKeyPress:e=>z(e,L,t),className:"w-full text-xs p-2 border border-gray-300 rounded"}),(0,o.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:O[L]&&(null===(r=O[L][t])||void 0===r?void 0:r.map((e,r)=>(0,o.jsxs)("span",{className:"inline-flex items-center text-xs bg-indigo-50 text-indigo-700 rounded px-1.5 py-0.5",children:[e,(0,o.jsx)("button",{type:"button",onClick:()=>H(L,t,r),className:"ml-1 text-gray-400 hover:text-gray-600",children:"\xd7"})]},r)))})]})]})]},t)}),(0,o.jsx)("div",{className:"w-32 h-32 flex items-center justify-center border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-indigo-500 transition-all duration-300",onClick:()=>{var e;return null===(e=E.current[L])||void 0===e?void 0:e.click()},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,o.jsx)("span",{className:"text-xs text-gray-500 mt-2 block",children:"Add Photo"})]})}),(0,o.jsx)("input",{type:"file",ref:e=>E.current[L]=e,onChange:e=>M(e,L),accept:"image/*",multiple:!0,className:"hidden"})]})]}):(0,o.jsx)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:(0,o.jsx)("p",{className:"text-gray-600",children:"Please select a room to add photos"})}),(0,o.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mt-6",children:[(0,o.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Photo Summary"}),(0,o.jsxs)("div",{className:"grid gap-2",children:[Object.entries(I).map(e=>{var t,r;let[s,a]=e;return(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("span",{className:"text-sm",children:[a,":"]}),(0,o.jsxs)("span",{className:"text-sm font-medium",children:[(null===(t=k[s])||void 0===t?void 0:t.length)||0," photo",1!==((null===(r=k[s])||void 0===r?void 0:r.length)||0)?"s":""]})]},s)}),(0,o.jsxs)("div",{className:"border-t border-gray-200 mt-2 pt-2 flex justify-between items-center",children:[(0,o.jsx)("span",{className:"text-sm font-medium",children:"Total:"}),(0,o.jsxs)("span",{className:"text-sm font-medium",children:[Object.values(k).reduce((e,t)=>e+((null==t?void 0:t.length)||0),0)," photos"]})]})]})]})]}):(0,o.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-500 mx-auto mb-4"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Loading property rooms..."})]})]}),(0,o.jsxs)("div",{className:"pt-4 flex justify-between items-center border-t border-gray-100 mt-6",children:[(0,o.jsx)("button",{type:"button",onClick:()=>w(1),className:"btn btn-secondary hover:bg-gray-100 transition-all duration-300",children:"Back"}),(0,o.jsx)("button",{type:"button",onClick:()=>w(3),className:"btn btn-primary hover:bg-indigo-500 transition-all duration-300",children:"Continue"})]})]}):(0,o.jsxs)("div",{className:"p-6 space-y-6",children:[(0,o.jsxs)("div",{className:"bg-green-50 border border-green-100 rounded-lg p-4 flex items-start",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500 mt-0.5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"font-medium text-green-800 text-sm",children:"Ready to Save"}),(0,o.jsx)("p",{className:"text-green-700 text-xs mt-1",children:"Please review your report details before saving"})]})]}),(0,o.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,o.jsx)("h3",{className:"font-medium text-gray-700 mb-3",children:"Report Information"}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-xs text-gray-500 block",children:"Property:"}),(0,o.jsx)("p",{className:"text-sm",children:null===(t=r.find(e=>e.id.toString()===c.toString()))||void 0===t?void 0:t.address})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-xs text-gray-500 block",children:"Report Title:"}),(0,o.jsx)("p",{className:"text-sm",children:h})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-xs text-gray-500 block",children:"Report Type:"}),(0,o.jsx)("p",{className:"text-sm",children:"move-in"===g?"Pre-Move-In":"move-out"===g?"Post-Move-Out":"General Observation"})]}),u&&(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-xs text-gray-500 block",children:"Description:"}),(0,o.jsx)("p",{className:"text-sm",children:u})]})]})]}),(0,o.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,o.jsx)("h3",{className:"font-medium text-gray-700 mb-3",children:"Photos"}),I&&Object.values(k).some(e=>(null==e?void 0:e.length)>0)?(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(I).map(e=>{var t,r;let[s,a]=e;return(null===(t=k[s])||void 0===t?void 0:t.length)>0&&(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsxs)("p",{className:"text-xs font-medium text-gray-600 mb-1",children:[a,":"]}),(0,o.jsx)("div",{className:"flex flex-wrap gap-1",children:null===(r=S[s])||void 0===r?void 0:r.map((e,t)=>(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)("img",{src:e,alt:"".concat(a," Photo ").concat(t+1),className:"w-12 h-12 object-cover rounded border border-gray-200"})},t))})]},s)})}),(0,o.jsxs)("div",{className:"text-xs text-gray-500 mt-2 w-full",children:[Object.values(k).reduce((e,t)=>e+((null==t?void 0:t.length)||0),0)," photo",1!==Object.values(k).reduce((e,t)=>e+((null==t?void 0:t.length)||0),0)?"s":""," attached"]})]}):(0,o.jsx)("p",{className:"text-sm text-gray-500",children:"No photos attached"})]})]}),(0,o.jsxs)("div",{className:"pt-4 flex justify-between items-center border-t border-gray-100 mt-6",children:[(0,o.jsx)("button",{type:"button",onClick:()=>w(2),className:"btn btn-secondary hover:bg-gray-100 transition-all duration-300",children:"Back"}),(0,o.jsx)("button",{type:"submit",className:"btn btn-primary hover:bg-indigo-500 transition-all duration-300",disabled:v,children:v?(0,o.jsxs)("span",{className:"flex items-center",children:[(0,o.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Create Report"})]})]})})]})]})})}}},function(e){e.O(0,[1664,6153,2888,9774,179],function(){return e(e.s=292)}),_N_E=e.O()}]);