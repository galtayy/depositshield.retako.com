(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6427],{3324:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reports/edit",function(){return r(4423)}])},7411:function(e,t,r){"use strict";r.d(t,{Ni:function(){return d},h6:function(){return i}});var o=r(610);let a="http://localhost:5050",s="https://api.depositshield.retako.com";function l(e){return e?e.startsWith("http")?e:e.startsWith("/uploads/")?"".concat(o.E.getBaseUrl()).concat(e):e.includes("/")?"".concat(o.E.getBaseUrl(),"/").concat(e.startsWith("/")?e.slice(1):e):"".concat(o.E.getBaseUrl(),"/uploads/").concat(e):null}function n(e){return e?"string"==typeof e?l(e):e.url?l(e.url):e.src?l(e.src):e.file_path?l("/uploads/".concat(e.file_path)):null:null}function i(e,t,r){if(!e||!t)return null;for(let o of[t.id,t.roomId,"".concat(t.id),"".concat(t.roomId)].filter(Boolean)){if(!o||!(o in e))continue;let t=e[o];if(t.photos&&Array.isArray(t.photos)&&r<t.photos.length)return n(t.photos[r]);if(Array.isArray(t)&&r<t.length)return n(t[r])}return null}function c(){return{primaryUrl:"/images/placeholder-image.svg",alternativeUrls:["/images/placeholder-image.svg"]}}function d(e){return Array.isArray(e)?e.map(e=>{if(!e)return e;let t=function(e){try{let t="localhost"!==window.location.hostname;console.log("Environment:",t?"PRODUCTION":"DEVELOPMENT");let r=t?s:a;if(console.log("Base API URL:",r),!e)return console.error("Invalid photo object:",e),c();console.log("Photo object:",{id:e.id,url:e.url,file_path:e.file_path});let o="";if(e.file_path)o=e.file_path;else if(e.url){let t=e.url.split("/");o=t[t.length-1]}let l="".concat(r,"/api/photos/public-access/").concat(o);console.log("Public access URL (NOAUTH):",l);let n="".concat(r,"/uploads/").concat(o);console.log("Direct access URL:",n);let i=function(e,t,r){let o=[t,r],l="";if(e.url){let t=e.url.split("/");l=t[t.length-1]}else e.file_path&&(l=e.file_path);return l&&(o.push("".concat(s,"/uploads/").concat(l)),o.push("".concat(a,"/uploads/").concat(l)),o.push("".concat(s,"/api/photos/public-access/").concat(l)),o.push("".concat(a,"/api/photos/public-access/").concat(l))),e.url&&(e.url.startsWith("/")?(o.push("".concat(s).concat(e.url)),o.push("".concat(a).concat(e.url))):(o.push("".concat(s,"/uploads/").concat(e.url)),o.push("".concat(a,"/uploads/").concat(e.url)))),e.file_path&&(o.push("".concat(s,"/uploads/").concat(e.file_path)),o.push("".concat(a,"/uploads/").concat(e.file_path))),o.push("/images/placeholder-image.svg"),[...new Set(o.filter(Boolean))]}(e,l,n);return console.log("Primary URL to try:",l),console.log("Alternative URLs to try:",i),{primaryUrl:l,alternativeUrls:i}}catch(e){return console.error("Error in processPhotoUrl:",e),c()}}(e);return{...e,imgSrc:t.primaryUrl,fallbackUrls:t.alternativeUrls}}):(console.error("Invalid photos array:",e),[])}},4423:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var o=r(5893),a=r(7294),s=r(1163),l=r(2920),n=r(6153),i=r(610),c=r(1491),d=r(7411);function p(){let{user:e,loading:t}=(0,c.a)(),[p,h]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[g,x]=(0,a.useState)(""),[b,f]=(0,a.useState)(!0),[v,y]=(0,a.useState)(!1),[j,N]=(0,a.useState)(1),[w,k]=(0,a.useState)(""),[R,A]=(0,a.useState)(""),[P,U]=(0,a.useState)(null),[_,C]=(0,a.useState)([]),[E,I]=(0,a.useState)([]),[S,L]=(0,a.useState)({}),[B,O]=(0,a.useState)({}),[D,F]=(0,a.useState)([]),[T,M]=(0,a.useState)(!0),z=(0,a.useRef)(null),W=(0,s.useRouter)(),{id:H}=W.query,V="http://localhost:5050",q="https://api.depositshield.retako.com",G=async e=>{if(confirm("Bu fotoğrafı silmek istediğinizden emin misiniz? Bu işlem geri alınamaz."))try{console.log("Deleting photo:",e),await i.E.photos.delete(e),console.log("Photo deleted"),F(D.filter(t=>t.id!==e)),l.Am.success("Fotoğraf başarıyla silindi.")}catch(t){console.error("Photo delete error:",t);let e="Fotoğraf silinirken bir hata oluştu.";t.response&&(console.error("API response error:",t.response.data),e=t.response.data.message||e),l.Am.error(e)}};(0,a.useEffect)(()=>{if(!t&&!e){W.push("/login");return}H&&(Z(),X())},[H,e,t,W]),(0,a.useEffect)(()=>{if(!_.length){I([]);return}let e=[];for(let t=0;t<_.length;t++){let r=_[t],o=URL.createObjectURL(r);e.push(o)}return I(e),()=>{e.forEach(e=>URL.revokeObjectURL(e))}},[_]);let X=async()=>{try{console.log("Fotoğraflar getiriliyor:",H);let e=[];try{let t=await i.E.photos.getByReport(H);console.log("Photos response:",t.data),Array.isArray(t.data)?e=t.data:console.error("Invalid photos data format:",t.data)}catch(t){console.error("Standard photos API call failed:",t);try{let t=(await r.e(9204).then(r.bind(r,9204))).default,o=localStorage.getItem("token"),a="localhost"!==window.location.hostname,s=await t.get("".concat(a?"https://api.depositshield.retako.com":"http://localhost:5050","/api/photos/report/").concat(H),{headers:o?{Authorization:"Bearer ".concat(o)}:{}});console.log("Alternative photos API call successful:",s.data),Array.isArray(s.data)?e=s.data:console.error("Invalid photos data format from alternative API:",s.data)}catch(t){console.error("Alternative photos API call also failed:",t),e=[]}}if(e.length>0){console.log("Received ".concat(e.length," photos"));let t=(0,d.Ni)(e);console.log("Enhanced photos with URLs:",t),F(t)}else console.log("No photos to display"),F([])}catch(t){console.error("Photos fetch error:",t);let e="Fotoğraflar y\xfcklenirken bir hata oluştu.";t.response&&(console.error("API yanıt hatası:",t.response.data),e=t.response.data.message||e),l.Am.error(e),F([])}finally{M(!1)}},Z=async()=>{try{var e;console.log("Rapor detayları getiriliyor:",H);let t=await i.E.reports.getById(H);console.log("Rapor detayları yanıtı:",t.data),console.log("Rapor UUID:",t.data.uuid),console.log("Rapor ID:",t.data.id);let r=t.data;h(r.title||""),m(r.description||""),x(r.type||""),k((null===(e=r.property_id)||void 0===e?void 0:e.toString())||""),A(r.address||""),U(r)}catch(t){console.error("Report fetch error:",t);let e="Rapor bilgileri y\xfcklenirken bir hata oluştu.";t.response&&(console.error("API yanıt hatası:",t.response.data),e=t.response.data.message||e),l.Am.error(e)}finally{f(!1)}},J=e=>{C(_.filter((t,r)=>r!==e)),I(E.filter((t,r)=>r!==e));let t={...S},r={...B};delete t[e],delete r[e];let o={},a={},s=0;for(let l=0;l<_.length;l++)l!==e&&(o[s]=t[l],a[s]=r[l],s++);L(o),O(a)},K=(e,t)=>{L({...S,[e]:t})},Q=(e,t)=>{t.trim()&&O({...B,[e]:[...B[e]||[],t.trim()]})},Y=(e,t)=>{O({...B,[e]:B[e].filter((e,r)=>r!==t)})},$=(e,t)=>{"Enter"===e.key&&e.target.value.trim()&&(Q(t,e.target.value),e.target.value="",e.preventDefault())},ee=async e=>{if(e.preventDefault(),!p||!g){l.Am.error("Please fill in all required fields.");return}y(!0);try{let e=P&&"rejected"===P.approval_status,t={title:p,description:u,type:g,generate_new_uuid:!!e||void 0};console.log("Rapor g\xfcncelleme isteği g\xf6nderiliyor:",t);let r=await i.E.reports.update(H,t);console.log("Rapor g\xfcncelleme yanıtı:",r.data);try{let e="report_updated_id_".concat(H);if(localStorage.setItem(e,"true"),console.log("Report marked as updated using ID key: ".concat(e)),P&&P.uuid){let e="report_updated_uuid_".concat(P.uuid);localStorage.setItem(e,"true"),console.log("Report also marked as updated using UUID key: ".concat(e))}else console.warn("No UUID available for this report")}catch(e){console.error("Error setting localStorage flags:",e)}if(_.length>0)for(let e=0;e<_.length;e++){let t=new FormData;t.append("photo",_[e]),S[e]&&t.append("note",S[e]),B[e]&&B[e].length>0&&t.append("tags",JSON.stringify(B[e])),console.log("Uploading photo ".concat(e+1,"...")),await i.E.photos.upload(H,t),console.log("Photo ".concat(e+1," uploaded."))}e?l.Am.success("The rejected report has been successfully updated and can be shared again."):l.Am.success("Report updated successfully."),W.push("/reports/".concat(H))}catch(t){console.error("Report update error:",t);let e="An error occurred while updating the report.";t.response&&(console.error("API response error:",t.response.data),e=t.response.data.message||e),l.Am.error(e)}finally{y(!1)}};return b||t?(0,o.jsx)(n.Z,{children:(0,o.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Edit Report"}),(0,o.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})]})}):(0,o.jsx)(n.Z,{children:(0,o.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-3xl animate-fadeIn",children:[(0,o.jsxs)("div",{className:"text-center mb-8",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-indigo-700 mb-2",children:"Edit Report"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Document the condition of your property"})]}),(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100",children:[(0,o.jsxs)("div",{className:"bg-indigo-50 p-4",children:[(0,o.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,o.jsx)("div",{className:"bg-indigo-600 h-2.5 rounded-full",style:{width:1===j?"33%":2===j?"66%":"100%"}})}),(0,o.jsxs)("div",{className:"flex justify-between mt-2 text-xs text-gray-500",children:[(0,o.jsxs)("span",{className:"font-medium text-indigo-700",children:["Step ",j," / 3"]}),(0,o.jsx)("span",{children:1===j?"Basic Information":2===j?"Photos":"Review"})]})]}),(0,o.jsx)("form",{onSubmit:3===j?ee:e=>e.preventDefault(),children:1===j?(0,o.jsxs)("div",{className:"p-6 space-y-6",children:[(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"property",className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Address*"}),(0,o.jsx)("input",{id:"property",type:"text",value:R,readOnly:!0,className:"input bg-gray-50 focus:border-indigo-500 transition-all duration-300"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Title*"}),(0,o.jsx)("input",{id:"title",type:"text",value:p,onChange:e=>h(e.target.value),className:"input focus:border-indigo-500 transition-all duration-300",placeholder:"Enter a short title for the report",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Description"}),(0,o.jsx)("textarea",{id:"description",value:u,onChange:e=>m(e.target.value),rows:3,className:"input focus:border-indigo-500 transition-all duration-300",placeholder:"General description about the report (optional)"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type*"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,o.jsxs)("div",{className:"p-4 rounded-lg border cursor-pointer text-center transition-all duration-300 ".concat("move-in"===g?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-indigo-200 hover:bg-indigo-50"),onClick:()=>x("move-in"),children:[(0,o.jsx)("input",{id:"type-move-in",name:"reportType",type:"radio",value:"move-in",checked:"move-in"===g,onChange:()=>x("move-in"),className:"hidden",required:!0}),(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mx-auto mb-2 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),(0,o.jsx)("label",{htmlFor:"type-move-in",className:"font-medium block",children:"Pre-Move-In"})]}),(0,o.jsxs)("div",{className:"p-4 rounded-lg border cursor-pointer text-center transition-all duration-300 ".concat("move-out"===g?"border-red-500 bg-red-50 text-red-700":"border-gray-200 hover:border-indigo-200 hover:bg-indigo-50"),onClick:()=>x("move-out"),children:[(0,o.jsx)("input",{id:"type-move-out",name:"reportType",type:"radio",value:"move-out",checked:"move-out"===g,onChange:()=>x("move-out"),className:"hidden"}),(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mx-auto mb-2 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,o.jsx)("label",{htmlFor:"type-move-out",className:"font-medium block",children:"Post-Move-Out"})]}),(0,o.jsxs)("div",{className:"p-4 rounded-lg border cursor-pointer text-center transition-all duration-300 ".concat("general"===g?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-indigo-200 hover:bg-indigo-50"),onClick:()=>x("general"),children:[(0,o.jsx)("input",{id:"type-general",name:"reportType",type:"radio",value:"general",checked:"general"===g,onChange:()=>x("general"),className:"hidden"}),(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mx-auto mb-2 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,o.jsx)("label",{htmlFor:"type-general",className:"font-medium block",children:"General Observation"})]})]})]})]}),(0,o.jsxs)("div",{className:"pt-4 flex justify-between items-center border-t border-gray-100 mt-6",children:[(0,o.jsx)("button",{type:"button",onClick:()=>W.back(),className:"btn btn-secondary hover:bg-gray-100 transition-all duration-300",children:"Cancel"}),(0,o.jsx)("button",{type:"button",onClick:()=>{p&&g?N(2):l.Am.error("Please fill in all required fields.")},className:"btn btn-primary hover:bg-indigo-500 transition-all duration-300",children:"Continue"})]})]}):2===j?(0,o.jsxs)("div",{className:"p-6 space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Upload Photos"}),(0,o.jsx)("p",{className:"text-gray-600 mb-6",children:"Upload photos to document the condition of your property"}),(0,o.jsxs)("div",{className:"flex flex-wrap gap-6 mb-6",children:[E.map((e,t)=>{var r;return(0,o.jsxs)("div",{className:"relative bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,o.jsx)("img",{src:e,alt:"Fotoğraf ".concat(t+1),className:"w-32 h-32 object-cover rounded-lg"}),(0,o.jsx)("button",{type:"button",onClick:()=>J(t),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md","aria-label":"Fotoğrafı kaldır",children:"\xd7"}),(0,o.jsxs)("div",{className:"mt-3 w-32",children:[(0,o.jsx)("input",{type:"text",placeholder:"Add a note",value:S[t]||"",onChange:e=>K(t,e.target.value),className:"w-full text-xs p-2 border border-gray-300 rounded"}),(0,o.jsxs)("div",{className:"mt-2",children:[(0,o.jsx)("input",{type:"text",placeholder:"Add a tag and press Enter",onKeyPress:e=>$(e,t),className:"w-full text-xs p-2 border border-gray-300 rounded"}),(0,o.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:null===(r=B[t])||void 0===r?void 0:r.map((e,r)=>(0,o.jsxs)("span",{className:"inline-flex items-center text-xs bg-indigo-50 text-indigo-700 rounded px-1.5 py-0.5",children:[e,(0,o.jsx)("button",{type:"button",onClick:()=>Y(t,r),className:"ml-1 text-gray-400 hover:text-gray-600",children:"\xd7"})]},r))})]})]})]},"new-".concat(t))}),T?(0,o.jsx)("div",{className:"flex justify-center items-center py-12 w-full",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):D.map(e=>{if(!e||!e.id)return console.error("Invalid photo object:",e),null;let t=e.imgSrc||"/images/placeholder-image.svg",r=e.fallbackUrls||["".concat(q,"/uploads/").concat(e.file_path),"".concat(V,"/uploads/").concat(e.file_path),"".concat(q,"/api/photos/public-access/").concat(e.file_path),"".concat(V,"/api/photos/public-access/").concat(e.file_path),"/images/placeholder-image.svg"];return(0,o.jsxs)("div",{className:"relative bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,o.jsx)("img",{src:t,alt:e.note||"Report photo",crossOrigin:"anonymous",className:"w-32 h-32 object-cover rounded-lg",onError:e=>{if(console.error("Image loading error for:",e.target.src),!r||!Array.isArray(r)){console.error("No fallback URLs available"),e.target.src="/images/placeholder-image.svg",e.target.onerror=null;return}let t=r.indexOf(e.target.src);if(-1!==t&&t<r.length-1){let o=r[t+1];console.log("Trying next URL (".concat(t+2,"/").concat(r.length,"): ").concat(o)),e.target.src=o}else console.log("All URLs failed, using placeholder image"),e.target.src="/images/placeholder-image.svg",e.target.onerror=null}}),(0,o.jsx)("button",{type:"button",onClick:()=>G(e.id),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md","aria-label":"Fotoğrafı kaldır",children:"\xd7"}),(0,o.jsxs)("div",{className:"mt-3 w-32",children:[e.note&&(0,o.jsx)("div",{className:"text-xs text-gray-700 p-1 bg-gray-100 rounded mb-1 line-clamp-2",title:e.note,children:e.note}),e.tags&&e.tags.length>0&&(0,o.jsx)("div",{className:"flex flex-wrap gap-1",children:e.tags.map((e,t)=>(0,o.jsx)("span",{className:"inline-flex items-center text-xs bg-indigo-50 text-indigo-700 rounded px-1.5 py-0.5 truncate max-w-[80px]",title:e,children:e},t))})]})]},"existing-".concat(e.id))}),(0,o.jsx)("div",{className:"w-32 h-32 flex items-center justify-center border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-indigo-500 transition-all duration-300",onClick:()=>z.current.click(),children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,o.jsx)("span",{className:"text-xs text-gray-500 mt-2 block",children:"Add Photo"})]})}),(0,o.jsx)("input",{type:"file",ref:z,onChange:e=>{if(e.target.files){let t=Array.from(e.target.files),r=_.length;C(e=>[...e,...t]);let o={...S},a={...B};t.forEach((e,t)=>{let s=r+t;o[s]="",a[s]=[]}),L(o),O(a)}},accept:"image/*",multiple:!0,className:"hidden"})]})]}),(0,o.jsxs)("div",{className:"pt-4 flex justify-between items-center border-t border-gray-100 mt-6",children:[(0,o.jsx)("button",{type:"button",onClick:()=>N(1),className:"btn btn-secondary hover:bg-gray-100 transition-all duration-300",children:"Back"}),(0,o.jsx)("button",{type:"button",onClick:()=>N(3),className:"btn btn-primary hover:bg-indigo-500 transition-all duration-300",children:"Continue"})]})]}):(0,o.jsxs)("div",{className:"p-6 space-y-6",children:[(0,o.jsxs)("div",{className:"bg-green-50 border border-green-100 rounded-lg p-4 flex items-start",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500 mt-0.5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"font-medium text-green-800 text-sm",children:"Ready to Save"}),(0,o.jsx)("p",{className:"text-green-700 text-xs mt-1",children:"Please review the report details before saving"})]})]}),(0,o.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,o.jsx)("h3",{className:"font-medium text-gray-700 mb-3",children:"Report Information"}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-xs text-gray-500 block",children:"Property:"}),(0,o.jsx)("p",{className:"text-sm",children:R})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-xs text-gray-500 block",children:"Report Title:"}),(0,o.jsx)("p",{className:"text-sm",children:p})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-xs text-gray-500 block",children:"Report Type:"}),(0,o.jsx)("p",{className:"text-sm",children:"move-in"===g?"Pre-Move-In":"move-out"===g?"Post-Move-Out":"General Observation"})]}),u&&(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-xs text-gray-500 block",children:"Description:"}),(0,o.jsx)("p",{className:"text-sm",children:u})]})]})]}),(0,o.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,o.jsx)("h3",{className:"font-medium text-gray-700 mb-3",children:"Photos"}),_.length>0||D.length>0?(0,o.jsxs)("div",{className:"flex flex-wrap gap-2",children:[E.map((e,t)=>(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)("img",{src:e,alt:"Photo ".concat(t+1),className:"w-16 h-16 object-cover rounded border border-gray-200"})},t)),D.map((e,t)=>(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)("img",{src:e.imgSrc||"/images/placeholder-image.svg",alt:e.note||"Existing Photo ".concat(t+1),className:"w-16 h-16 object-cover rounded border border-gray-200",crossOrigin:"anonymous",onError:e=>{e.target.src="/images/placeholder-image.svg"}})},"thumb-".concat(e.id))),(0,o.jsxs)("div",{className:"text-xs text-gray-500 mt-2 w-full",children:[_.length+D.length," photos added"]})]}):(0,o.jsx)("p",{className:"text-sm text-gray-500",children:"No photos added yet"})]})]}),(0,o.jsxs)("div",{className:"pt-4 flex justify-between items-center border-t border-gray-100 mt-6",children:[(0,o.jsx)("button",{type:"button",onClick:()=>N(2),className:"btn btn-secondary hover:bg-gray-100 transition-all duration-300",children:"Back"}),(0,o.jsx)("button",{type:"submit",className:"btn btn-primary hover:bg-indigo-500 transition-all duration-300",disabled:v,children:v?(0,o.jsxs)("span",{className:"flex items-center",children:[(0,o.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Update Report"})]})]})})]})]})})}}},function(e){e.O(0,[1664,6153,2888,9774,179],function(){return e(e.s=3324)}),_N_E=e.O()}]);