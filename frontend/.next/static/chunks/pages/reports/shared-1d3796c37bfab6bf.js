(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1049],{2705:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reports/shared",function(){return t(4371)}])},4371:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return x}});var s=t(5893),n=t(7294),a=t(1163),i=t(1664),l=t.n(i),d=t(6153),c=t(1491),o=t(610);function x(){let{user:e,loading:r}=(0,c.a)(),[t,i]=(0,n.useState)([]),[x,m]=(0,n.useState)(!0),h=(0,a.useRouter)();(0,n.useEffect)(()=>{if(!r&&!e){h.push("/login");return}u()},[e,r,h]);let u=async()=>{try{m(!0);let e=await o.E.reports.getAll();i(e.data||[])}catch(e){console.error("Error fetching shared reports:",e)}finally{m(!1)}},p=e=>{switch(e){case"move-in":return(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:"Pre-Move-In"});case"move-out":return(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",children:"Post-Move-Out"});case"general":return(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:"General"});default:return null}},f=e=>e&&e.uuid?"".concat(window.location.origin,"/reports/shared/").concat(e.uuid):"#",j=e=>{let r=f(e);navigator.clipboard.writeText(r).then(()=>{alert("Share link copied to clipboard!")}).catch(e=>{console.error("Failed to copy link: ",e)})};return r?(0,s.jsx)(d.Z,{children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Shared Reports"}),(0,s.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})]})}):(0,s.jsx)(d.Z,{children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Shared Reports"})}),x?(0,s.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):0===t.length?(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 text-center",children:[(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"You have no reports to share yet."}),(0,s.jsx)(l(),{href:"/reports/new",className:"btn btn-primary",children:"Create a Report"})]}):(0,s.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:e.title}),p(e.type)]}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-2",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),(0,s.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:e.address})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)("button",{onClick:()=>j(e),className:"btn btn-secondary flex items-center text-sm",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),"Copy Link"]}),(0,s.jsxs)(l(),{href:"/reports/".concat(e.id),className:"btn btn-primary flex items-center text-sm",children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]})]})]})})},e.id))})]})})}}},function(e){e.O(0,[1664,6153,2888,9774,179],function(){return e(e.s=2705)}),_N_E=e.O()}]);