(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{1969:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return r(7606)}])},7606:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return d}});var a=r(5893),l=r(7294),t=r(1163),n=r(2920),o=r(6153),i=r(610),c=r(1491);function d(){let{user:e,loading:s}=(0,c.a)(),[r,d]=(0,l.useState)(""),[m,u]=(0,l.useState)(""),[p,h]=(0,l.useState)(!0),[f,x]=(0,l.useState)(!1),b=(0,t.useRouter)();(0,l.useEffect)(()=>{if(!s&&!e){b.push("/login");return}e&&(d(e.name||""),u(e.email||""),g())},[e,s,b]);let g=async()=>{try{h(!0),console.log("Fetching profile information...");let e=await i.E.user.getProfile();console.log("Profile response:",e.data),e.data&&(d(e.data.name||""),u(e.data.email||""))}catch(s){console.error("Profile fetch error:",s);let e="An error occurred while loading profile information.";s.response&&(console.error("API response error:",s.response.data),e=s.response.data.message||e),n.Am.error(e)}finally{h(!1)}},N=async e=>{if(e.preventDefault(),!r||!m){n.Am.error("Please fill in all fields.");return}x(!0);try{console.log("Sending profile update request:",{name:r,email:m});let e=await i.E.user.updateProfile({name:r,email:m});console.log("Profile update response:",e.data),n.Am.success("Profile updated successfully.")}catch(s){console.error("Profile update error:",s);let e="An error occurred while updating the profile.";s.response&&(console.error("API response error:",s.response.data),e=s.response.data.message||e),n.Am.error(e)}finally{x(!1)}};return s||p?(0,a.jsx)(o.Z,{children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"My Profile"}),(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})]})}):(0,a.jsx)(o.Z,{children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"My Profile"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),(0,a.jsx)("input",{id:"name",type:"text",value:r,onChange:e=>d(e.target.value),className:"input",placeholder:"Full Name",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,a.jsx)("input",{id:"email",type:"email",value:m,onChange:e=>u(e.target.value),className:"input",placeholder:"example@email.com",required:!0})]}),(0,a.jsx)("div",{className:"flex justify-end space-x-3 pt-4",children:(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:f,children:f?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Update Profile"})})]}),(0,a.jsxs)("div",{className:"mt-8 border-t pt-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Change Password"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Click the button below to change your password."}),(0,a.jsx)("button",{onClick:()=>b.push("/profile/change-password"),className:"btn btn-secondary",children:"Change Password"})]})]})]})})}}},function(e){e.O(0,[1664,6153,2888,9774,179],function(){return e(e.s=1969)}),_N_E=e.O()}]);