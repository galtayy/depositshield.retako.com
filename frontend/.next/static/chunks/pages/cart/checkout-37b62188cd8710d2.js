(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9971],{3339:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart/checkout",function(){return r(6825)}])},6825:function(e,a,r){"use strict";r.r(a);var t=r(5893),s=r(7294),d=r(1163),l=r(6153),i=r(856),n=r(1491),c=r(610),m=r(2920);let o=[{id:"standard",label:"Standard Shipping (3-5 business days)",price:5.99},{id:"express",label:"Express Shipping (1-2 business days)",price:12.99},{id:"free",label:"Free Shipping (5-7 business days)",price:0}],x={firstName:"",lastName:"",email:"",address:"",city:"",state:"",postalCode:"",country:"United States",phone:"",shippingMethod:"standard",paymentMethod:"credit_card",cardNumber:"",cardExpiry:"",cardCvc:"",nameOnCard:""};a.default=()=>{let e=(0,d.useRouter)(),{cart:a,clearCart:r}=(0,i.j)(),{user:p,isAuthenticated:h,loading:u}=(0,n.a)(),[y,b]=(0,s.useState)(x),[N,g]=(0,s.useState)({}),[j,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{u||h||(localStorage.setItem("auth_redirect","/cart/checkout"),e.push("/login"))},[h,u,e]),(0,s.useEffect)(()=>{p&&b(e=>({...e,firstName:p.first_name||"",lastName:p.last_name||"",email:p.email||"",phone:p.phone||""}))},[p]);let v=e=>{let{name:a,value:r}=e.target;b(e=>({...e,[a]:r})),N[a]&&g(e=>({...e,[a]:null}))},C=o.find(e=>e.id===y.shippingMethod)||o[0],w=a.total,E=C.price,_=.07*w,k=w+E+_,F=()=>{let e={};return["firstName","lastName","email","address","city","state","postalCode","country","phone"].forEach(a=>{y[a]||(e[a]="This field is required")}),y.email&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(y.email)&&(e.email="Invalid email address"),"credit_card"!==y.paymentMethod||(y.cardNumber?/^\d{16}$/.test(y.cardNumber.replace(/\s/g,""))||(e.cardNumber="Invalid card number"):e.cardNumber="Card number is required",y.cardExpiry?/^\d{2}\/\d{2}$/.test(y.cardExpiry)||(e.cardExpiry="Invalid expiry date (MM/YY)"):e.cardExpiry="Expiry date is required",y.cardCvc?/^\d{3,4}$/.test(y.cardCvc)||(e.cardCvc="Invalid CVC"):e.cardCvc="CVC is required",y.nameOnCard||(e.nameOnCard="Name on card is required")),g(e),0===Object.keys(e).length},M=async t=>{if(t.preventDefault(),0===a.items.length){m.Am.error("Your cart is empty");return}if(!F()){m.Am.error("Please fix the errors in the form");return}f(!0);try{let t={items:a.items.map(e=>({product_id:e.id,quantity:e.quantity,price:e.price})),shipping:{first_name:y.firstName,last_name:y.lastName,email:y.email,address:y.address,city:y.city,state:y.state,postal_code:y.postalCode,country:y.country,phone:y.phone,method:y.shippingMethod},payment:{method:y.paymentMethod,card_details:"credit_card"===y.paymentMethod?{last_four:y.cardNumber.slice(-4),expiry:y.cardExpiry,name:y.nameOnCard}:null},subtotal:w,shipping_cost:E,tax:_,total:k},s=await c.E.cart.checkout(t);r(),e.push({pathname:"/cart/confirmation",query:{order_id:s.data.id}})}catch(e){console.error("Checkout error:",e),m.Am.error("Failed to process your order. Please try again.")}finally{f(!1)}};return u||!h?(0,t.jsx)(l.Z,{children:(0,t.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})})}):(0,t.jsx)(l.Z,{children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-8",children:"Checkout"}),(0,t.jsxs)("form",{onSubmit:M,className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-800 mb-4",children:"Shipping Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name*"}),(0,t.jsx)("input",{type:"text",id:"firstName",name:"firstName",value:y.firstName,onChange:v,className:"w-full p-2 border rounded-md ".concat(N.firstName?"border-red-500":"border-gray-300")}),N.firstName&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:N.firstName})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name*"}),(0,t.jsx)("input",{type:"text",id:"lastName",name:"lastName",value:y.lastName,onChange:v,className:"w-full p-2 border rounded-md ".concat(N.lastName?"border-red-500":"border-gray-300")}),N.lastName&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:N.lastName})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email*"}),(0,t.jsx)("input",{type:"email",id:"email",name:"email",value:y.email,onChange:v,className:"w-full p-2 border rounded-md ".concat(N.email?"border-red-500":"border-gray-300")}),N.email&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:N.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone*"}),(0,t.jsx)("input",{type:"tel",id:"phone",name:"phone",value:y.phone,onChange:v,className:"w-full p-2 border rounded-md ".concat(N.phone?"border-red-500":"border-gray-300")}),N.phone&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:N.phone})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Address*"}),(0,t.jsx)("input",{type:"text",id:"address",name:"address",value:y.address,onChange:v,className:"w-full p-2 border rounded-md ".concat(N.address?"border-red-500":"border-gray-300")}),N.address&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:N.address})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:"City*"}),(0,t.jsx)("input",{type:"text",id:"city",name:"city",value:y.city,onChange:v,className:"w-full p-2 border rounded-md ".concat(N.city?"border-red-500":"border-gray-300")}),N.city&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:N.city})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700 mb-1",children:"State/Province*"}),(0,t.jsx)("input",{type:"text",id:"state",name:"state",value:y.state,onChange:v,className:"w-full p-2 border rounded-md ".concat(N.state?"border-red-500":"border-gray-300")}),N.state&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:N.state})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"postalCode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code*"}),(0,t.jsx)("input",{type:"text",id:"postalCode",name:"postalCode",value:y.postalCode,onChange:v,className:"w-full p-2 border rounded-md ".concat(N.postalCode?"border-red-500":"border-gray-300")}),N.postalCode&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:N.postalCode})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 mb-1",children:"Country*"}),(0,t.jsxs)("select",{id:"country",name:"country",value:y.country,onChange:v,className:"w-full p-2 border rounded-md ".concat(N.country?"border-red-500":"border-gray-300"),children:[(0,t.jsx)("option",{value:"United States",children:"United States"}),(0,t.jsx)("option",{value:"Canada",children:"Canada"}),(0,t.jsx)("option",{value:"United Kingdom",children:"United Kingdom"}),(0,t.jsx)("option",{value:"Australia",children:"Australia"}),(0,t.jsx)("option",{value:"Germany",children:"Germany"}),(0,t.jsx)("option",{value:"France",children:"France"}),(0,t.jsx)("option",{value:"Japan",children:"Japan"})]}),N.country&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:N.country})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-800 mb-4",children:"Shipping Method"}),(0,t.jsx)("div",{className:"space-y-3",children:o.map(e=>(0,t.jsxs)("label",{className:"flex items-center space-x-3 p-3 border rounded-md cursor-pointer hover:bg-gray-50",children:[(0,t.jsx)("input",{type:"radio",name:"shippingMethod",value:e.id,checked:y.shippingMethod===e.id,onChange:v,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),(0,t.jsxs)("div",{className:"flex flex-1 justify-between",children:[(0,t.jsx)("span",{className:"text-gray-900",children:e.label}),(0,t.jsx)("span",{className:"font-medium",children:0===e.price?"FREE":"$".concat(e.price.toFixed(2))})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-800 mb-4",children:"Payment Information"}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,t.jsx)("input",{type:"radio",name:"paymentMethod",value:"credit_card",checked:"credit_card"===y.paymentMethod,onChange:v,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),(0,t.jsx)("span",{children:"Credit Card"})]}),(0,t.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,t.jsx)("input",{type:"radio",name:"paymentMethod",value:"paypal",checked:"paypal"===y.paymentMethod,onChange:v,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),(0,t.jsx)("span",{children:"PayPal"})]})]})}),"credit_card"===y.paymentMethod&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{htmlFor:"cardNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number*"}),(0,t.jsx)("input",{type:"text",id:"cardNumber",name:"cardNumber",value:y.cardNumber,onChange:v,placeholder:"1234 5678 9012 3456",className:"w-full p-2 border rounded-md ".concat(N.cardNumber?"border-red-500":"border-gray-300")}),N.cardNumber&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:N.cardNumber})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{htmlFor:"nameOnCard",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name on Card*"}),(0,t.jsx)("input",{type:"text",id:"nameOnCard",name:"nameOnCard",value:y.nameOnCard,onChange:v,className:"w-full p-2 border rounded-md ".concat(N.nameOnCard?"border-red-500":"border-gray-300")}),N.nameOnCard&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:N.nameOnCard})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"cardExpiry",className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date (MM/YY)*"}),(0,t.jsx)("input",{type:"text",id:"cardExpiry",name:"cardExpiry",value:y.cardExpiry,onChange:v,placeholder:"MM/YY",className:"w-full p-2 border rounded-md ".concat(N.cardExpiry?"border-red-500":"border-gray-300")}),N.cardExpiry&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:N.cardExpiry})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"cardCvc",className:"block text-sm font-medium text-gray-700 mb-1",children:"CVC/CVV*"}),(0,t.jsx)("input",{type:"text",id:"cardCvc",name:"cardCvc",value:y.cardCvc,onChange:v,placeholder:"123",className:"w-full p-2 border rounded-md ".concat(N.cardCvc?"border-red-500":"border-gray-300")}),N.cardCvc&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:N.cardCvc})]})]}),"paypal"===y.paymentMethod&&(0,t.jsx)("p",{className:"text-gray-600",children:"You will be redirected to PayPal to complete your payment after you place your order."})]})]}),(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 sticky top-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-800 mb-4",children:"Order Summary"}),(0,t.jsx)("div",{className:"mb-4 max-h-60 overflow-y-auto border-b border-gray-200 pb-4",children:a.items.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"text-gray-500 ml-2",children:["\xd7",e.quantity]})]}),(0,t.jsxs)("div",{className:"font-medium",children:["$",(e.price*e.quantity).toFixed(2)]})]},e.id))}),(0,t.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,t.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,t.jsx)("span",{children:"Subtotal"}),(0,t.jsxs)("span",{children:["$",w.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,t.jsx)("span",{children:"Shipping"}),(0,t.jsx)("span",{children:0===C.price?"FREE":"$".concat(C.price.toFixed(2))})]}),(0,t.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,t.jsx)("span",{children:"Tax (7%)"}),(0,t.jsxs)("span",{children:["$",_.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"pt-3 border-t border-gray-200 flex justify-between font-medium text-lg text-gray-800",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsxs)("span",{children:["$",k.toFixed(2)]})]})]}),(0,t.jsx)("button",{type:"submit",disabled:j||0===a.items.length,className:"w-full py-3 px-4 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors ".concat(j||0===a.items.length?"opacity-50 cursor-not-allowed":""),children:j?"Processing...":"Place Order • $".concat(k.toFixed(2))})]})})]})]})})}}},function(e){e.O(0,[1664,6153,2888,9774,179],function(){return e(e.s=3339)}),_N_E=e.O()}]);