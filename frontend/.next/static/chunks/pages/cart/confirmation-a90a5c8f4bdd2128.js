(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7120],{7546:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart/confirmation",function(){return s(7042)}])},7042:function(e,t,s){"use strict";s.r(t);var r=s(5893),i=s(7294),a=s(1163),n=s(1664),d=s.n(n),l=s(6153),c=s(610),o=s(1491);t.default=()=>{var e,t,s,n,x,h,m,p,u,g;let j=(0,a.useRouter)(),{isAuthenticated:f,loading:y}=(0,o.a)(),[N,b]=(0,i.useState)(null),[v,w]=(0,i.useState)(!0),[k,_]=(0,i.useState)(null),{order_id:S}=j.query;return((0,i.useEffect)(()=>{if(!y&&!f){j.push("/login");return}S&&f?(w(!0),c.E.cart.getOrderById(S).then(e=>{b(e.data),w(!1)}).catch(e=>{console.error("Failed to fetch order details:",e),_("Unable to load your order details. Please try again later."),w(!1)})):S||y||j.push("/cart")},[S,f,y,j]),y||!f)?(0,r.jsx)(l.Z,{children:(0,r.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})})}):(0,r.jsx)(l.Z,{children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsx)("div",{className:"max-w-3xl mx-auto",children:v?(0,r.jsx)("div",{className:"flex justify-center items-center py-16",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):k?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mt-4 mb-2",children:"Error Loading Order"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:k}),(0,r.jsx)(d(),{href:"/cart",children:(0,r.jsx)("a",{className:"inline-block px-6 py-3 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Return to Cart"})})]}):N?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-green-100 p-6 text-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mt-4",children:"Order Confirmed!"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Thank you for your purchase. Your order has been received and is being processed."})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-800 mb-2",children:"Order Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600",children:"Order Number:"}),(0,r.jsx)("p",{className:"font-medium",children:N.id||"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600",children:"Date:"}),(0,r.jsx)("p",{className:"font-medium",children:N.created_at?new Date(N.created_at).toLocaleDateString():"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600",children:"Total:"}),(0,r.jsxs)("p",{className:"font-medium",children:["$",parseFloat(N.total||0).toFixed(2)]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600",children:"Payment Method:"}),(0,r.jsx)("p",{className:"font-medium",children:(null===(e=N.payment)||void 0===e?void 0:e.method)==="credit_card"?"Credit Card (ending in ".concat((null===(s=N.payment)||void 0===s?void 0:null===(t=s.card_details)||void 0===t?void 0:t.last_four)||"xxxx",")"):(null===(n=N.payment)||void 0===n?void 0:n.method)==="paypal"?"PayPal":"N/A"})]})]})]}),(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-800 mb-2",children:"Shipping Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600",children:"Shipping Address:"}),(0,r.jsx)("p",{className:"font-medium",children:N.shipping?(0,r.jsxs)(r.Fragment,{children:[N.shipping.first_name," ",N.shipping.last_name,(0,r.jsx)("br",{}),N.shipping.address,(0,r.jsx)("br",{}),N.shipping.city,", ",N.shipping.state," ",N.shipping.postal_code,(0,r.jsx)("br",{}),N.shipping.country]}):"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600",children:"Contact:"}),(0,r.jsxs)("p",{className:"font-medium",children:[(null===(x=N.shipping)||void 0===x?void 0:x.email)||"N/A",(0,r.jsx)("br",{}),(null===(h=N.shipping)||void 0===h?void 0:h.phone)||"N/A"]}),(0,r.jsx)("p",{className:"text-gray-600 mt-3",children:"Shipping Method:"}),(0,r.jsx)("p",{className:"font-medium",children:(null===(m=N.shipping)||void 0===m?void 0:m.method)==="standard"?"Standard Shipping (3-5 business days)":(null===(p=N.shipping)||void 0===p?void 0:p.method)==="express"?"Express Shipping (1-2 business days)":(null===(u=N.shipping)||void 0===u?void 0:u.method)==="free"?"Free Shipping (5-7 business days)":"N/A"})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-800 mb-4",children:"Order Items"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),(0,r.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,r.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null===(g=N.items)||void 0===g?void 0:g.map((e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"font-medium text-gray-800",children:e.name||"Product"}),e.id&&(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["SKU: ",e.id]})]}),(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-gray-800",children:e.quantity||1}),(0,r.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-right text-gray-800",children:["$",parseFloat(e.price||0).toFixed(2)]}),(0,r.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-right font-medium text-gray-800",children:["$",parseFloat((e.price||0)*(e.quantity||1)).toFixed(2)]})]},e.id||t))}),(0,r.jsxs)("tfoot",{className:"bg-gray-50",children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{colSpan:"3",className:"px-4 py-3 text-right text-sm font-medium text-gray-500",children:"Subtotal"}),(0,r.jsxs)("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-800",children:["$",parseFloat(N.subtotal||0).toFixed(2)]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{colSpan:"3",className:"px-4 py-3 text-right text-sm font-medium text-gray-500",children:"Shipping"}),(0,r.jsxs)("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-800",children:["$",parseFloat(N.shipping_cost||0).toFixed(2)]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{colSpan:"3",className:"px-4 py-3 text-right text-sm font-medium text-gray-500",children:"Tax"}),(0,r.jsxs)("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-800",children:["$",parseFloat(N.tax||0).toFixed(2)]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{colSpan:"3",className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"Total"}),(0,r.jsxs)("th",{className:"px-4 py-3 text-right text-base font-bold text-gray-900",children:["$",parseFloat(N.total||0).toFixed(2)]})]})]})]})})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-4",children:[(0,r.jsx)(d(),{href:"/products",children:(0,r.jsx)("a",{className:"inline-block px-6 py-3 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors text-center",children:"Continue Shopping"})}),(0,r.jsx)(d(),{href:"/orders/".concat(N.id),children:(0,r.jsx)("a",{className:"inline-block px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors text-center",children:"View Order Details"})})]})]})]}):(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[(0,r.jsx)("h2",{className:"text-xl font-medium text-gray-800 mb-4",children:"No order information found."}),(0,r.jsx)(d(),{href:"/cart",children:(0,r.jsx)("a",{className:"inline-block px-6 py-3 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Return to Cart"})})]})})})})}}},function(e){e.O(0,[1664,6153,2888,9774,179],function(){return e(e.s=7546)}),_N_E=e.O()}]);