(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8161],{5706:function(e,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/properties/[id]",function(){return t(7573)}])},7573:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return d}});var r=t(5893),n=t(7294),s=t(1163),a=t(1491),i=t(610);function d(){let e=(0,s.useRouter)(),{id:o}=e.query,{user:t,loading:d}=(0,a.a)(),[l,p]=(0,n.useState)(!0),c=(e,o,t)=>{if(!e.address||!e.deposit_amount||!e.lease_duration)return console.log("Property details missing:",{address:e.address,deposit:e.deposit_amount,lease:e.lease_duration}),!1;if(!e.landlord_email&&!e.landlord_phone)return console.log("Landlord contact info missing"),{needsLandlordInfo:!0};if(!o||0===o.length)return console.log("No rooms found"),!1;let r=!1;for(let e of o){let o=e.id||e.roomId;if((e.photoCount||(t[o]&&t[o].photos?t[o].photos.length:0))>0){r=!0;break}}return!!r||(console.log("No rooms with photos found"),!1)};return(0,n.useEffect)(()=>{(async()=>{if(o&&!d){if(!t){e.push("/login");return}try{let t=(await i.E.properties.getById(o)).data,r=(await i.E.properties.getRooms(o)).data||[],n=await i.E.photos.getByProperty(o),s={};n.data&&n.data.forEach(e=>{e.room_id&&(s[e.room_id]||(s[e.room_id]={photos:[]}),s[e.room_id].photos.push(e))});let a=await i.E.reports.getByProperty(o),d=a.data&&a.data.length>0,l=c(t,r,s);l&&l.needsLandlordInfo?(console.log("Redirecting to landlord update page - landlord info missing"),e.replace("/properties/".concat(o,"/landlord-update"))):!0===l&&d?(console.log("Redirecting to new details page - all property info is complete"),e.replace("/properties/details?propertyId=".concat(o))):(console.log("Redirecting to regular property page - some property info is missing"),e.replace("/properties/".concat(o,"/index-new")))}catch(t){console.error("Error checking property status:",t),e.replace("/properties/".concat(o,"/index-new"))}finally{p(!1)}}})()},[o,t,d,e]),(0,r.jsx)("div",{className:"flex justify-center items-center h-screen bg-[#FBF5DA]",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#1C2C40]"})})}}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=5706)}),_N_E=e.O()}]);