(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[794],{5011:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/properties/[id]/index-new",function(){return o(7662)}])},7411:function(e,t,o){"use strict";o.d(t,{Ni:function(){return d},h6:function(){return l}});var r=o(610);let s="http://localhost:5050",n="https://api.depositshield.retako.com";function i(e){return e?e.startsWith("http")?e:e.startsWith("/uploads/")?"".concat(r.E.getBaseUrl()).concat(e):e.includes("/")?"".concat(r.E.getBaseUrl(),"/").concat(e.startsWith("/")?e.slice(1):e):"".concat(r.E.getBaseUrl(),"/uploads/").concat(e):null}function a(e){return e?"string"==typeof e?i(e):e.url?i(e.url):e.src?i(e.src):e.file_path?i("/uploads/".concat(e.file_path)):null:null}function l(e,t,o){if(!e||!t)return null;for(let r of[t.id,t.roomId,"".concat(t.id),"".concat(t.roomId)].filter(Boolean)){if(!r||!(r in e))continue;let t=e[r];if(t.photos&&Array.isArray(t.photos)&&o<t.photos.length)return a(t.photos[o]);if(Array.isArray(t)&&o<t.length)return a(t[o])}return null}function c(){return{primaryUrl:"/images/placeholder-image.svg",alternativeUrls:["/images/placeholder-image.svg"]}}function d(e){return Array.isArray(e)?e.map(e=>{if(!e)return e;let t=function(e){try{let t="localhost"!==window.location.hostname;console.log("Environment:",t?"PRODUCTION":"DEVELOPMENT");let o=t?n:s;if(console.log("Base API URL:",o),!e)return console.error("Invalid photo object:",e),c();console.log("Photo object:",{id:e.id,url:e.url,file_path:e.file_path});let r="";if(e.file_path)r=e.file_path;else if(e.url){let t=e.url.split("/");r=t[t.length-1]}let i="".concat(o,"/api/photos/public-access/").concat(r);console.log("Public access URL (NOAUTH):",i);let a="".concat(o,"/uploads/").concat(r);console.log("Direct access URL:",a);let l=function(e,t,o){let r=[t,o],i="";if(e.url){let t=e.url.split("/");i=t[t.length-1]}else e.file_path&&(i=e.file_path);return i&&(r.push("".concat(n,"/uploads/").concat(i)),r.push("".concat(s,"/uploads/").concat(i)),r.push("".concat(n,"/api/photos/public-access/").concat(i)),r.push("".concat(s,"/api/photos/public-access/").concat(i))),e.url&&(e.url.startsWith("/")?(r.push("".concat(n).concat(e.url)),r.push("".concat(s).concat(e.url))):(r.push("".concat(n,"/uploads/").concat(e.url)),r.push("".concat(s,"/uploads/").concat(e.url)))),e.file_path&&(r.push("".concat(n,"/uploads/").concat(e.file_path)),r.push("".concat(s,"/uploads/").concat(e.file_path))),r.push("/images/placeholder-image.svg"),[...new Set(r.filter(Boolean))]}(e,i,a);return console.log("Primary URL to try:",i),console.log("Alternative URLs to try:",l),{primaryUrl:i,alternativeUrls:l}}catch(e){return console.error("Error in processPhotoUrl:",e),c()}}(e);return{...e,imgSrc:t.primaryUrl,fallbackUrls:t.alternativeUrls}}):(console.error("Invalid photos array:",e),[])}},7443:function(e,t,o){"use strict";var r=o(3454);o(1479);var s=o(7294),n=s&&"object"==typeof s&&"default"in s?s:{default:s},i=void 0!==r&&r.env&&!0,a=function(e){return"[object String]"===Object.prototype.toString.call(e)},l=function(){function e(e){var t=void 0===e?{}:e,o=t.name,r=void 0===o?"stylesheet":o,s=t.optimizeForSpeed,n=void 0===s?i:s;c(a(r),"`name` must be a string"),this._name=r,this._deletedRulePlaceholder="#"+r+"-deleted-rule____{}",c("boolean"==typeof n,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=n,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var l=document.querySelector('meta[property="csp-nonce"]');this._nonce=l?l.getAttribute("content"):null}var t=e.prototype;return t.setOptimizeForSpeed=function(e){c("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),c(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},t.isOptimizeForSpeed=function(){return this._optimizeForSpeed},t.inject=function(){var e=this;if(c(!this._injected,"sheet already injected"),this._injected=!0,this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(i||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,o){return"number"==typeof o?e._serverSheet.cssRules[o]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),o},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},t.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},t.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},t.insertRule=function(e,t){if(c(a(e),"`insertRule` accepts only strings"),this._optimizeForSpeed){var o=this.getSheet();"number"!=typeof t&&(t=o.cssRules.length);try{o.insertRule(e,t)}catch(t){return i||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var r=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,r))}return this._rulesCount++},t.replaceRule=function(e,t){if(this._optimizeForSpeed){var o=this.getSheet();if(t.trim()||(t=this._deletedRulePlaceholder),!o.cssRules[e])return e;o.deleteRule(e);try{o.insertRule(t,e)}catch(r){i||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),o.insertRule(this._deletedRulePlaceholder,e)}}else{var r=this._tags[e];c(r,"old rule at index `"+e+"` not found"),r.textContent=t}return e},t.deleteRule=function(e){if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];c(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},t.flush=function(){this._injected=!1,this._rulesCount=0,this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]},t.cssRules=function(){var e=this;return this._tags.reduce(function(t,o){return o?t=t.concat(Array.prototype.map.call(e.getSheetForTag(o).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},t.makeStyleTag=function(e,t,o){t&&c(a(t),"makeStyleTag accepts only strings as second parameter");var r=document.createElement("style");this._nonce&&r.setAttribute("nonce",this._nonce),r.type="text/css",r.setAttribute("data-"+e,""),t&&r.appendChild(document.createTextNode(t));var s=document.head||document.getElementsByTagName("head")[0];return o?s.insertBefore(r,o):s.appendChild(r),r},function(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),e}();function c(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var d=function(e){for(var t=5381,o=e.length;o;)t=33*t^e.charCodeAt(--o);return t>>>0},p={};function h(e,t){if(!t)return"jsx-"+e;var o=String(t),r=e+o;return p[r]||(p[r]="jsx-"+d(e+"-"+o)),p[r]}function u(e,t){var o=e+t;return p[o]||(p[o]=t.replace(/__jsx-style-dynamic-selector/g,e)),p[o]}var m=function(){function e(e){var t=void 0===e?{}:e,o=t.styleSheet,r=void 0===o?null:o,s=t.optimizeForSpeed,n=void 0!==s&&s;this._sheet=r||new l({name:"styled-jsx",optimizeForSpeed:n}),this._sheet.inject(),r&&"boolean"==typeof n&&(this._sheet.setOptimizeForSpeed(n),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var o=this.getIdAndRules(e),r=o.styleId,s=o.rules;if(r in this._instancesCounts){this._instancesCounts[r]+=1;return}var n=s.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[r]=n,this._instancesCounts[r]=1},t.remove=function(e){var t=this,o=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(o in this._instancesCounts,"styleId: `"+o+"` not found"),this._instancesCounts[o]-=1,this._instancesCounts[o]<1){var r=this._fromServer&&this._fromServer[o];r?(r.parentNode.removeChild(r),delete this._fromServer[o]):(this._indices[o].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[o]),delete this._instancesCounts[o]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],o=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return o[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,o;return t=this.cssRules(),void 0===(o=e)&&(o={}),t.map(function(e){var t=e[0],r=e[1];return n.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:o.nonce?o.nonce:void 0,dangerouslySetInnerHTML:{__html:r}})})},t.getIdAndRules=function(e){var t=e.children,o=e.dynamic,r=e.id;if(o){var s=h(r,o);return{styleId:s,rules:Array.isArray(t)?t.map(function(e){return u(s,e)}):[u(s,t)]}}return{styleId:h(r),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),f=s.createContext(null);f.displayName="StyleSheetContext";var x=n.default.useInsertionEffect||n.default.useLayoutEffect,g=new m;function y(e){var t=g||s.useContext(f);return t&&x(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)]),null}y.dynamic=function(e){return e.map(function(e){return h(e[0],e[1])}).join(" ")},t.style=y},645:function(e,t,o){"use strict";e.exports=o(7443).style},7662:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return j}});var r=o(5893),s=o(645),n=o.n(s),i=o(7294),a=o(1163);o(1664);var l=o(9008),c=o.n(l),d=o(2920);o(6153);var p=o(610),h=o(1491),u=o(7411);let m=()=>(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M2 22H22",stroke:"#1C2C40",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M2.95 22L3 9L6 11V14H18V11L21 9V22",stroke:"#1C2C40",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M4 6V4C4 2.9 4.9 2 6 2H18C19.1 2 20 2.9 20 4V6",stroke:"#1C2C40",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M18 11H6V7C6 5.9 6.9 5 8 5H16C17.1 5 18 5.9 18 7V11Z",stroke:"#1C2C40",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})]}),f=()=>(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20Z",stroke:"#1C2C40",strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M4 8H20",stroke:"#1C2C40",strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M12 8V20",stroke:"#1C2C40",strokeWidth:"1.5"})]}),x=()=>(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",stroke:"#1C2C40",strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M7.5 5V19",stroke:"#1C2C40",strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M12 12H16",stroke:"#1C2C40",strokeWidth:"1.5"})]}),g=()=>(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M4 9H20V18C20 20 18.5 22 16 22H8C5.5 22 4 20 4 18V9Z",stroke:"#1C2C40",strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M4 5C4 3 5 2 7 2H17C19 2 20 3 20 5V9H4V5Z",stroke:"#1C2C40",strokeWidth:"1.5"}),(0,r.jsx)("circle",{cx:"16",cy:"5.5",r:"1.5",stroke:"#1C2C40",strokeWidth:"1.5"})]}),y=()=>(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M2 8H22V20C22 21.1 21.1 22 20 22H4C2.9 22 2 21.1 2 20V8Z",stroke:"#0B1420",strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M5 2V8",stroke:"#0B1420",strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M9 2V8",stroke:"#0B1420",strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M15 2V8",stroke:"#0B1420",strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M19 2V8",stroke:"#0B1420",strokeWidth:"1.5"})]}),v=()=>(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M6 12H18",stroke:"#515964",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M12 18V6",stroke:"#515964",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),b=()=>(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M5.94001 13.2799L10.6 8.61989C11.14 8.07989 11.14 7.17989 10.6 6.63989L5.94001 1.97989",stroke:"#1C2C40",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})}),w=e=>{let{show:t,onSelect:o,onClose:s}=e,[n,a]=(0,i.useState)("");(0,i.useEffect)(()=>{let e;return t?e=setTimeout(()=>{a("visible")},10):a(""),()=>{e&&clearTimeout(e)}},[t]);let l=e=>{a(""),setTimeout(()=>{o(e)},300)};return t||n?(0,r.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-40 bottom-sheet-overlay ".concat(n),onClick:()=>{a(""),setTimeout(()=>{s()},300)}}),(0,r.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 w-full h-[385px] bg-white rounded-t-[24px] overflow-hidden bottom-sheet ".concat(n," safe-area-bottom"),children:[(0,r.jsx)("div",{className:"flex justify-center items-center pt-[10px] pb-0",children:(0,r.jsx)("div",{className:"w-[95px] h-[6px] bg-[#ECECEC] rounded-[24px]"})}),(0,r.jsx)("div",{className:"flex justify-center items-center h-[55px]",children:(0,r.jsx)("h3",{className:"font-bold text-[18px] leading-[25px] text-[#0B1420]",children:"Choose Room Type"})}),(0,r.jsxs)("div",{className:"w-full max-w-[350px] mx-auto",children:[(0,r.jsx)("div",{className:"flex flex-row justify-between items-center h-[56px] border-b border-[#ECF0F5] px-0 py-[16px]",onClick:()=>l("living"),children:(0,r.jsxs)("div",{className:"flex flex-row items-center gap-[12px]",children:[(0,r.jsx)(m,{}),(0,r.jsx)("div",{className:"font-bold text-[14px] leading-[19px] text-[#0B1420]",children:"Living Room"})]})}),(0,r.jsx)("div",{className:"flex flex-row justify-between items-center h-[56px] border-b border-[#ECF0F5] px-0 py-[16px]",onClick:()=>l("bedroom"),children:(0,r.jsxs)("div",{className:"flex flex-row items-center gap-[12px]",children:[(0,r.jsx)(f,{}),(0,r.jsx)("div",{className:"font-bold text-[14px] leading-[19px] text-[#0B1420]",children:"Bedroom"})]})}),(0,r.jsx)("div",{className:"flex flex-row justify-between items-center h-[56px] border-b border-[#ECF0F5] px-0 py-[16px]",onClick:()=>l("kitchen"),children:(0,r.jsxs)("div",{className:"flex flex-row items-center gap-[12px]",children:[(0,r.jsx)(x,{}),(0,r.jsx)("div",{className:"font-bold text-[14px] leading-[19px] text-[#0B1420]",children:"Kitchen"})]})}),(0,r.jsx)("div",{className:"flex flex-row justify-between items-center h-[56px] border-b border-[#ECF0F5] px-0 py-[16px]",onClick:()=>l("bathroom"),children:(0,r.jsxs)("div",{className:"flex flex-row items-center gap-[12px]",children:[(0,r.jsx)(g,{}),(0,r.jsx)("div",{className:"font-bold text-[14px] leading-[19px] text-[#0B1420]",children:"Bathroom"})]})}),(0,r.jsx)("div",{className:"flex flex-row justify-between items-center h-[56px] px-0 py-[16px]",onClick:()=>l("other"),children:(0,r.jsxs)("div",{className:"flex flex-row items-center gap-[12px]",children:[(0,r.jsx)(y,{}),(0,r.jsx)("div",{className:"font-bold text-[14px] leading-[19px] text-[#0B1420]",children:"Other"})]})})]})]})]}):null};function j(){let{user:e,loading:t}=(0,h.a)(),[o,s]=(0,i.useState)(null),[l,m]=(0,i.useState)([]),[f,x]=(0,i.useState)({}),[g,y]=(0,i.useState)([]),[j,_]=(0,i.useState)(!0),[k,C]=(0,i.useState)(!1),N=(0,a.useRouter)(),{id:S}=N.query;(0,i.useEffect)(()=>{if(!t&&!e){N.push("/login");return}S&&(R(),L(),A())},[S,e,t,N]);let A=async()=>{try{console.log("Loading rooms directly from API for property:",S);let e=await p.E.properties.getRooms(S);if(console.log("API response for rooms:",e.data),e.data&&Array.isArray(e.data)){e.data.forEach(e=>{console.log("[DEBUG] Room from API - ID: ".concat(e.roomId,", Name: ").concat(e.roomName,", Quality: ").concat(e.roomQuality,", Photos: ").concat(e.photoCount))});let t=e.data.map(e=>({id:e.roomId,name:e.roomName||"Unnamed Room",type:e.roomType||"other",itemsNoted:Array.isArray(e.roomIssueNotes)?e.roomIssueNotes.length:0,photoCount:parseInt(e.photoCount)||0,roomQuality:e.roomQuality?String(e.roomQuality):null}));console.log("Formatted rooms from API:",t),y(t),F(e.data)}else console.log("No rooms found in API response")}catch(e){console.error("Error loading rooms from API:",e);try{console.log("Falling back to localStorage for rooms");let e=JSON.parse(localStorage.getItem("property_".concat(S,"_rooms"))||"[]");if(e.length>0){console.log("Found saved rooms in localStorage:",e.length);let t=e.map(e=>({id:e.roomId,name:e.roomName||"Unnamed Room",type:e.roomType||"other",itemsNoted:Array.isArray(e.roomIssueNotes)?e.roomIssueNotes.length:0,photoCount:parseInt(e.photoCount)||0,roomQuality:e.roomQuality?String(e.roomQuality):null}));y(t),F(e)}else console.log("No rooms found in localStorage")}catch(e){console.error("Error loading rooms from localStorage:",e)}}},F=async e=>{try{if(!S||!e||!Array.isArray(e)){console.log("No property ID or rooms list, skipping photo fetch");return}console.log("Fetching photos for all rooms in property:",S);try{let e=await p.E.photos.getByProperty(S);if(console.log("Property photos from API:",e.data),e.data){let t={};e.data.photosByRoom?(console.log("Using photosByRoom from API response"),t=e.data.photosByRoom):Array.isArray(e.data)&&(console.log("Grouping photos by room_id"),e.data.forEach(e=>{e.room_id&&(t[e.room_id]||(t[e.room_id]={photos:[]}),t[e.room_id].photos.push({...e,url:e.url||"/uploads/".concat(e.file_path)}))})),console.log("Final photosByRoom:",t),x(t)}}catch(e){console.error("Error fetching photos from API:",e)}}catch(e){console.error("Failed to fetch room photos:",e)}},R=async()=>{try{console.log("Fetching property details:",S);let e=await p.E.properties.getById(S);console.log("Property details response:",e.data),s(e.data)}catch(e){console.error("Property fetch error:",e),d.Am.error("An error occurred while loading property information.")}finally{_(!1)}},B=(e,t)=>{if(e.stopPropagation(),console.log("[DEBUG] Attempting to delete room with ID:",t),confirm("Bu odayı silmek istediğinizden emin misiniz?"))try{let e=JSON.parse(localStorage.getItem("property_".concat(S,"_rooms"))||"[]");console.log("[DEBUG] Current rooms before deletion:",e);let o=e.filter(e=>e.roomId!==t);console.log("[DEBUG] Updated rooms after deletion:",o),localStorage.setItem("property_".concat(S,"_rooms"),JSON.stringify(o)),y(g.filter(e=>e.id!==t));try{localStorage.removeItem("property_".concat(S,"_room_").concat(t,"_photos"));let e=JSON.parse(localStorage.getItem("property_".concat(S,"_room_photos"))||"{}");e[t]&&(delete e[t],localStorage.setItem("property_".concat(S,"_room_photos"),JSON.stringify(e)),console.log("[DEBUG] Removed photos for room:",t))}catch(e){console.error("Oda fotoğrafları silinirken hata oluştu:",e)}d.Am.success("Oda başarıyla silindi")}catch(e){console.error("Oda silinirken hata oluştu:",e),d.Am.error("Oda silinirken bir hata oluştu")}},L=async()=>{try{console.log("Fetching reports for property:",S);let e=await p.E.reports.getByProperty(S);console.log("Reports response:",e.data),m(e.data)}catch(e){console.error("Reports fetch error:",e),d.Am.error("An error occurred while loading reports.")}};return j||t?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen bg-[#FBF5DA]",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#1C2C40]"}),(0,r.jsx)("div",{className:"mt-4 text-[#1C2C40] text-lg",children:"Loading property data..."})]}):o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c(),{children:[(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no",className:"jsx-928f9c27fabafaee"}),(0,r.jsx)("meta",{name:"theme-color",content:"#FBF5DA",className:"jsx-928f9c27fabafaee"}),(0,r.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes",className:"jsx-928f9c27fabafaee"}),(0,r.jsx)("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default",className:"jsx-928f9c27fabafaee"}),(0,r.jsx)("meta",{name:"mobile-web-app-capable",content:"yes",className:"jsx-928f9c27fabafaee"}),(0,r.jsx)("link",{rel:"manifest",href:"/manifest.json",className:"jsx-928f9c27fabafaee"}),(0,r.jsx)(n(),{id:"928f9c27fabafaee",children:'body{background-color:#FBF5DA;margin:0;padding:0;font-family:"Nunito",sans-serif;min-height:100vh;width:100%;overflow-x:hidden}.safe-area-top{padding-top:env(safe-area-inset-top,40px)}.safe-area-bottom{padding-bottom:env(safe-area-inset-bottom,20px)}.safe-area-left{padding-left:env(safe-area-inset-left,0px)}.safe-area-right{padding-right:env(safe-area-inset-right,0px)}@supports(padding:max(0px)){.safe-area-top{padding-top:max(env(safe-area-inset-top),40px)}.safe-area-bottom{padding-bottom:max(env(safe-area-inset-bottom),20px)}.safe-area-left{padding-left:max(env(safe-area-inset-left),0px)}.safe-area-right{padding-right:max(env(safe-area-inset-right),0px)}}button,a{-webkit-tap-highlight-color:transparent;-ms-touch-action:-ms-manipulation;-ms-touch-action:manipulation;touch-action:manipulation}.smooth-scroll{-webkit-overflow-scrolling:touch}.bottom-sheet{-webkit-transform:translatey(100%);-moz-transform:translatey(100%);-ms-transform:translatey(100%);-o-transform:translatey(100%);transform:translatey(100%);-webkit-transition:-webkit-transform.3s ease-out;-moz-transition:-moz-transform.3s ease-out;-o-transition:-o-transform.3s ease-out;transition:-webkit-transform.3s ease-out;transition:-moz-transform.3s ease-out;transition:-o-transform.3s ease-out;transition:transform.3s ease-out}.bottom-sheet.visible{-webkit-transform:translatey(0);-moz-transform:translatey(0);-ms-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}.bottom-sheet-overlay{opacity:0;-webkit-transition:opacity.3s ease-out;-moz-transition:opacity.3s ease-out;-o-transition:opacity.3s ease-out;transition:opacity.3s ease-out}.bottom-sheet-overlay.visible{opacity:1}@-webkit-keyframes slideUp{from{-webkit-transform:translatey(100%);transform:translatey(100%)}to{-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes slideUp{from{-moz-transform:translatey(100%);transform:translatey(100%)}to{-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes slideUp{from{-o-transform:translatey(100%);transform:translatey(100%)}to{-o-transform:translatey(0);transform:translatey(0)}}@keyframes slideUp{from{-webkit-transform:translatey(100%);-moz-transform:translatey(100%);-o-transform:translatey(100%);transform:translatey(100%)}to{-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}.animate-slide-up{-webkit-animation:slideUp.3s ease-out forwards;-moz-animation:slideUp.3s ease-out forwards;-o-animation:slideUp.3s ease-out forwards;animation:slideUp.3s ease-out forwards}@media(max-width:390px){.room-container{width:90%!important}.room-card{width:100%!important}.bottom-button{width:90%!important;left:5%!important}}@media(orientation:landscape){.bottom-button{position:relative!important;margin:20px auto!important;left:auto!important;bottom:auto!important}.content-container{padding-bottom:100px!important}}'})]}),(0,r.jsxs)("div",{className:"relative w-full max-w-[500px] min-h-screen mx-auto bg-[#FBF5DA] font-['Nunito'] overflow-x-hidden",children:[(0,r.jsx)("div",{className:"w-full h-[40px] safe-area-top"}),(0,r.jsx)("div",{className:"sticky top-0 w-full h-[65px] flex flex-col bg-[#FBF5DA] z-10",children:(0,r.jsxs)("div",{className:"w-full h-[65px] flex flex-row justify-center items-center p-[20px_10px]",children:[(0,r.jsx)("button",{className:"absolute left-[20px] w-[24px] h-[24px] flex items-center justify-center",onClick:()=>N.push("/"),"aria-label":"Go back",children:(0,r.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M15 19.9201L8.47997 13.4001C7.70997 12.6301 7.70997 11.3701 8.47997 10.6001L15 4.08008",stroke:"#292D32",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,r.jsx)("h1",{className:"w-full max-w-[270px] font-semibold text-[18px] leading-[140%] text-center text-[#0B1420]",children:o.address||"Property Details"})]})}),(0,r.jsxs)("div",{className:"content-container pb-[100px]",children:[(0,r.jsx)("div",{className:"w-[350px] max-w-[90%] mx-auto mt-[24px]"}),(0,r.jsxs)("div",{className:"room-container w-[350px] max-w-[90%] mx-auto smooth-scroll",children:[g.length>0?g.map((e,t)=>{var o,s;return console.log("Rendering room:",e),(0,r.jsxs)("div",{className:"room-card box-border w-[350px] max-w-full h-auto min-h-[77px] mb-[16px] p-[16px] bg-white border border-[#D1E7D5] rounded-[16px] cursor-pointer transition-all duration-200 active:opacity-80 relative",onClick:()=>{N.push({pathname:"/properties/".concat(S,"/configure-room"),query:{roomName:e.name,roomType:e.type,roomId:e.id}})},children:[(0,r.jsx)("button",{className:"absolute bottom-[4px] right-[4px] w-[20px] h-[20px] flex items-center justify-center z-10 opacity-80 hover:opacity-100 transition-opacity",onClick:t=>B(t,e.id),"aria-label":"Odayı sil",children:(0,r.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M14 3.98667C11.78 3.76667 9.54667 3.65333 7.32 3.65333C6 3.65333 4.68 3.72 3.36 3.85333L2 3.98667",stroke:"#D14848",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M5.66669 3.31999L5.81335 2.43999C5.92002 1.80666 6.00002 1.33333 7.12669 1.33333H8.87335C10 1.33333 10.0867 1.83999 10.1867 2.44666L10.3334 3.31999",stroke:"#D14848",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M12.5667 6.09333L12.1334 12.8067C12.06 13.8533 12 14.6667 10.14 14.6667H5.86002C4.00002 14.6667 3.94002 13.8533 3.86668 12.8067L3.43335 6.09333",stroke:"#D14848",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M6.88669 11H9.10669",stroke:"#D14848",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M6.33331 8.33333H9.66665",stroke:"#D14848",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,r.jsxs)("div",{className:"flex flex-row justify-between items-start w-full",children:[(0,r.jsx)("div",{className:"flex flex-row items-start",children:(0,r.jsxs)("div",{className:"flex flex-col items-start gap-[8px] flex-1 pr-2",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center gap-[4px] w-full flex-wrap",children:[(0,r.jsx)("span",{className:"font-bold text-[14px] leading-[19px] text-[#0B1420]",children:e.name}),"attention"===e.roomQuality&&e.itemsNoted>0&&(0,r.jsxs)("span",{className:"font-semibold text-[14px] leading-[19px] text-[#0B1420]",children:["(",e.itemsNoted," ",1===e.itemsNoted?"item":"items"," noted)"]}),"good"===e.roomQuality&&(0,r.jsx)("span",{className:"font-semibold text-[14px] leading-[19px] text-[#55A363]",children:"(Looks good)"}),(!e.roomQuality||"null"===e.roomQuality||"undefined"===e.roomQuality)&&(0,r.jsx)("span",{className:"font-semibold text-[14px] leading-[19px] text-[#515964]",children:"(No assessment)"})]}),(0,r.jsxs)("div",{className:"flex flex-row items-center gap-[4px] h-[24px]",children:[(0,r.jsxs)("div",{className:"flex flex-row",children:[console.log("Room photos for",e.id,":",(null===(s=f[e.id])||void 0===s?void 0:null===(o=s.photos)||void 0===o?void 0:o.length)||0,"photos"),Array.from({length:Math.min(e.photoCount||0,4)}).map((t,o)=>{console.log("Rendering photo",o,"for room",e.id);let s=null;try{if(!(s=(0,u.h6)(f,e,o))){var n,i,a,l,c,d;(null===(a=f[e.id])||void 0===a?void 0:null===(i=a.photos)||void 0===i?void 0:null===(n=i[o])||void 0===n?void 0:n.url)?s=f[e.id].photos[o].url:(null===(d=f[e.id])||void 0===d?void 0:null===(c=d.photos)||void 0===c?void 0:null===(l=c[o])||void 0===l?void 0:l.file_path)&&(s="".concat(p.E.getBaseUrl(),"/uploads/").concat(f[e.id].photos[o].file_path))}}catch(t){console.error("Error rendering photo ".concat(o," for room ").concat(e.id,":"),t)}return console.log("Photo URL for",e.id,":",s),(0,r.jsxs)("div",{className:"w-[24px] h-[24px] rounded-full bg-gray-200 border border-[#D1E7E2] overflow-hidden",style:{marginLeft:o>0?"-8px":"0",backgroundImage:s?"url(".concat(s,")"):"none",backgroundSize:"cover",backgroundPosition:"center",zIndex:10-o},children:[!s&&(0,r.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:(0,r.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M6 8C7.10457 8 8 7.10457 8 6C8 4.89543 7.10457 4 6 4C4.89543 4 4 4.89543 4 6C4 7.10457 4.89543 8 6 8Z",fill:"#A3ADB8"}),(0,r.jsx)("path",{d:"M9.33333 2H6.66667C3.33333 2 2 3.33333 2 6.66667V9.33333C2 12.6667 3.33333 14 6.66667 14H9.33333C12.6667 14 14 12.6667 14 9.33333V6.66667C14 3.33333 12.6667 2 9.33333 2ZM12.3067 9.63333L10.2867 7.22C10.08 6.96667 9.82667 6.96667 9.62 7.22L7.88667 9.3C7.68667 9.55 7.43333 9.55 7.23333 9.3L6.65333 8.58C6.45333 8.33667 6.20667 8.34333 6.01333 8.59333L3.81333 11.4767C3.57333 11.7933 3.69333 12.06 4.10667 12.06H11.8867C12.3 12.06 12.4267 11.7933 12.3067 9.63333Z",fill:"#A3ADB8"})]})}),3===o&&e.photoCount>4&&(0,r.jsxs)("div",{className:"flex items-center justify-center w-full h-full bg-[#1C2C40] text-white font-bold text-[10px]",children:["+",e.photoCount-3]})]},o)})]}),(0,r.jsxs)("span",{className:"font-semibold text-[12px] leading-[16px] text-[#515964] ml-[6px]",children:["(",parseInt(e.photoCount)||0," ",1===parseInt(e.photoCount)?"Photo":"Photos",")"]})]})]})}),(0,r.jsx)("div",{className:"flex items-center h-full",children:(0,r.jsx)(b,{})})]})]},e.id||t)}):(0,r.jsxs)("div",{className:"box-border w-[350px] max-w-full p-[16px] bg-white border border-[#D1E7D5] rounded-[16px] mb-[16px] text-center",children:[(0,r.jsx)("p",{className:"font-semibold text-[14px] leading-[19px] text-[#515964]",children:"No rooms have been added yet. Use the Room Management feature to add rooms to your property."}),(0,r.jsx)("button",{className:"mt-4 font-bold text-[14px] text-[#55A363] underline",onClick:()=>{k||C(!0)},children:"Add New Room"})]}),(0,r.jsxs)("button",{className:"box-border flex flex-row justify-center items-center p-[18px_20px] gap-[8px] w-full h-[56px] bg-white border border-[#D1E7D5] rounded-[16px] mt-[16px] cursor-pointer transition-all duration-200 active:opacity-80 hover:bg-[#F8F8F8]",onClick:()=>{k||C(!0)},children:[(0,r.jsx)(v,{}),(0,r.jsx)("span",{className:"font-bold text-[14px] leading-[19px] text-center text-[#515964]",children:"Add New Room"})]})]})]}),(0,r.jsx)("div",{className:"bottom-button fixed left-[5%] bottom-[26px] w-[90%] max-w-[350px] h-[56px] safe-area-bottom",children:(0,r.jsx)("button",{onClick:()=>{N.push({pathname:"/properties/".concat(S,"/landlord-details"),query:{propertyId:o.id}})},className:"flex flex-row justify-center items-center w-full h-[56px] bg-[#1C2C40] rounded-[16px] cursor-pointer transition-all duration-200 active:opacity-80 hover:opacity-90",children:(0,r.jsx)("span",{className:"font-bold text-[16px] leading-[22px] text-[#D1E7E2]",children:"Finish Walkthrough"})})}),(0,r.jsx)(w,{show:k,onSelect:e=>{C(!1),S?N.push({pathname:"/properties/".concat(S,"/configure-room"),query:{roomType:e}}):(console.error("Missing property ID. Cannot navigate to configure room page."),d.Am.error("Unable to add room. Please try again later."))},onClose:()=>C(!1)})]})]}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen bg-[#FBF5DA]",children:[(0,r.jsx)("div",{className:"text-xl text-[#1C2C40] mb-4",children:"Property not found or you don't have access"}),(0,r.jsx)("button",{onClick:()=>N.push("/properties"),className:"px-4 py-2 bg-[#1C2C40] text-white rounded-[8px]",children:"Go to properties list"})]})}},1479:function(){}},function(e){e.O(0,[1664,6153,2888,9774,179],function(){return e(e.s=5011)}),_N_E=e.O()}]);