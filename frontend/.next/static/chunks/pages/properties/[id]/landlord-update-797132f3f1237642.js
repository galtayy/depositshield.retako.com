(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7067],{4006:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/properties/[id]/landlord-update",function(){return l(5899)}])},5899:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return x}});var a=l(5893),r=l(7294),n=l(1163),s=l(9008),o=l.n(s),i=l(1491),d=l(610);let c=function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];console.log("[LANDLORD PAGE]",...t)},p=()=>(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M15 19.9201L8.47997 13.4001C7.70997 12.6301 7.70997 11.3701 8.47997 10.6001L15 4.08008",stroke:"#292D32",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})});function x(){let{user:e,loading:t}=(0,i.a)(),l=(0,n.useRouter)(),{id:s}=l.query,[x,u]=(0,r.useState)(null),[m,h]=(0,r.useState)(!0),[f,b]=(0,r.useState)(!1),[w,g]=(0,r.useState)(""),[v,j]=(0,r.useState)(""),N=e=>{if(!e)return e;let t=e.replace(/[^\d]/g,""),l=t.length;return l<1?"":l<4?"(".concat(t):l<7?"(".concat(t.slice(0,3),") ").concat(t.slice(3)):"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6,10))};(0,r.useEffect)(()=>{if(s&&!t){if(!e){l.push("/login");return}(async()=>{try{let e=(await d.E.properties.getById(s)).data;u(e),e.landlord_email&&g(e.landlord_email),e.landlord_phone&&j(e.landlord_phone),h(!1)}catch(e){console.error("Error loading property data:",e),h(!1),l.push("/properties")}})()}},[s,e,t,l]);let y=async e=>{e.preventDefault();let t=w.trim(),l=v.trim();if(c("Form values:",{emailValue:t,phoneValue:l}),(t||l)&&(!t||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))&&(!l||10===l.replace(/\D/g,"").length)){b(!0);try{c("Starting the save operation through api.js");let e={email:t,phone:l};c("API \xe7ağrısı veri:",e);let a=await d.E.properties.saveLandlordDetails(s,e);c("Kayıt işlemi başarılı! Yanıt:",a.data),localStorage.setItem("lastSharedPropertyId",s),c("localStorage'a propertyId kaydedildi:",s),c("Şimdi details sayfasına y\xf6nlendiriliyor..."),window.location.href="/properties/details?propertyId=".concat(s)}catch(e){c("Kayıt işlemi başarısız!",e),b(!1)}}};return m?(0,a.jsx)("div",{className:"flex justify-center items-center h-screen bg-[#FBF5DA]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#1C2C40]"})}):(0,a.jsxs)("div",{className:"relative w-full min-h-screen bg-[#FBF5DA] font-['Nunito'] overflow-x-hidden",children:[(0,a.jsxs)(o(),{children:[(0,a.jsx)("title",{children:"Landlord Information - DepositShield"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"})]}),(0,a.jsx)("div",{className:"w-full h-[40px] safe-area-top"}),(0,a.jsx)("div",{className:"fixed w-full h-[65px] left-0 top-[40px] z-10 bg-[#FBF5DA]",children:(0,a.jsxs)("div",{className:"flex flex-row justify-center items-center py-[20px] px-[10px] gap-[10px] w-full h-[65px] safe-area-inset-left safe-area-inset-right",children:[(0,a.jsx)("button",{className:"absolute left-[20px] top-[50%] transform -translate-y-1/2 p-2",onClick:()=>l.back(),"aria-label":"Go back",children:(0,a.jsx)(p,{})}),(0,a.jsx)("h1",{className:"w-full max-w-[270px] font-semibold text-[18px] leading-[140%] text-center text-[#0B1420]",children:"Landlord Information"})]})}),(0,a.jsx)("div",{className:"flex flex-col items-center w-full pt-[105px] px-4 px-safe pb-[100px]",children:(0,a.jsx)("div",{className:"w-full max-w-[350px] mx-auto",children:(0,a.jsxs)("div",{className:"bg-white border border-[#D1E7D5] rounded-[16px] w-full p-6",children:[(0,a.jsx)("h2",{className:"text-[18px] font-bold mb-4 text-[#0B1420]",children:"Enter Landlord Contact Information"}),(0,a.jsx)("p",{className:"text-[14px] text-[#515964] mb-6",children:"This information will be used to send property reports to your landlord."}),(0,a.jsxs)("form",{onSubmit:y,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"landlordEmail",className:"block font-medium text-[14px] mb-2 text-[#0B1420]",children:"Landlord Email"}),(0,a.jsx)("input",{id:"landlordEmail",type:"email",value:w,onChange:e=>g(e.target.value),className:"w-full h-[48px] px-4 rounded-[12px] border border-[#ECF0F5] focus:border-[#1C2C40] focus:outline-none",placeholder:"email@example.com"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"landlordPhone",className:"block font-medium text-[14px] mb-2 text-[#0B1420]",children:"Landlord Phone"}),(0,a.jsx)("input",{id:"landlordPhone",type:"tel",value:v,onChange:e=>j(N(e.target.value)),className:"w-full h-[48px] px-4 rounded-[12px] border border-[#ECF0F5] focus:border-[#1C2C40] focus:outline-none",placeholder:"(123) 456-7890"})]}),(0,a.jsx)("button",{type:"submit",disabled:f,className:"w-full h-[56px] flex flex-row justify-center items-center p-[18px] gap-[10px] bg-[#1C2C40] rounded-[16px] touch-manipulation active:bg-[#283c56] transition-colors",children:(0,a.jsx)("span",{className:"font-bold text-[16px] leading-[22px] text-[#D1E7E2]",children:f?"Saving...":"Save Information"})})]})]})})})]})}}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=4006)}),_N_E=e.O()}]);